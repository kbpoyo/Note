# 程序中可被加载的段

> 程序的可执行文件(.elf)的二进制编码存储于磁盘上，内核会读取磁盘，并对该编码进行elf文件分析，将可加载的段拷贝到其对应的内存地址中去

![](http://imgs.kbpoyo.top/imgs/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F_202301211542988.png)

## Text 段

text段为代码段，用来存储程序编译之后的指令，指令的二进制数据全部存储在代码段，这样cpu在执行完当前指令后才可根据当前指令的长度计算出下一条指令的地址。且为了防止代码段被覆盖，该段是只读的。

Data ，Bss 以及 Rodata段

- data：存储已经初始化的全局变量以及已经初始化的静态变量，且都是可读写的。
- bss：存储未初始化的全局变量以及未初始化的静态变量，且都是可读写的。
- rodata：存储已经初始化的全局变量以及已经初始化的静态变量，且都是只读的，所以也必须初始化。

## stack 和 heap 段

- stack：栈段是由内核为用户程序分配的一段内存空间，由栈顶指针esp寄存器指向该段内存空间的高地址，在栈中存储数据是由高地址到低地址进行存储，并在函数调用时用来压入参数，上下文环境（ebp寄存器）和局部变量，在函数执行完后再移动esp将该段空间回收。
- heap：堆区也是由内核为用户程序分配的一大段内存空间，使用时通过系统调用在该段内存上申请空间，申请的内存空间在销毁前都有效。

## Dynamic Libraries 段

内核分配的一段内存空间，为加载运行时库所预留。






