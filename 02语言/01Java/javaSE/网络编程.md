### InetAddress类

> [!info]+ 常用方法 
> - 获取*IP*地址：**InetAddress getByName(域名或IP地址)** 返回一个InetAddress的实列化对象，属性为域名 + IPv4地址
> - 获取*本地IP*：**InetAddress getLocalHost()**
> - 获取InetAddress实例化对象的*Host*(域名或主机名)属性：**String getHostName()**
> - 获取InetAddress实例化对象的*IPv4*属性：**String getHostAddress()**
> - 获取InetAddress实例化对象的*规范的IPv4*属性：**String getCanonicalHostName()**

**示例：InetAddressTest**
```java
package com.kuang.lesson1;
import java.net.InetAddress;
import java.net.UnknownHostException;
//IP 这个东西，怎么用Java对象表示
public class InetAddressTest {
	public static void main(String[] args) {
		try {
			//获得IP地址
				InetAddress inetAddresses1 =
				InetAddress.getByName("192.168.8.123");
				System.out.println(inetAddresses1);
				InetAddress inetAddresses2 =
				InetAddress.getByName("www.baidu.com");
				System.out.println(inetAddresses2);
			//获取本地IP
				InetAddress inetAddresses3 = InetAddress.getByName("127.0.0.1");
				System.out.println(inetAddresses3);
				InetAddress inetAddresses4 = InetAddress.getByName("localhost");
				System.out.println(inetAddresses4);
				InetAddress inetAddresses5 = InetAddress.getLocalHost();
				System.out.println(inetAddresses5);
			//getHostName
				System.out.println(inetAddresses2.getHostName());
			//getHostAddress
				System.out.println(inetAddresses2.getHostAddress());
			//Canonical : 规范的
				System.out.println(inetAddresses2.getCanonicalHostName());
		} catch (UnknownHostException e) {
			e.printStackTrace();
		}
	}
}
```


### InetSocketAddress 类

> [!info]+ 常用方法
> - 构造：**InetSocketAddress** socketAddress = new **InetSocketAddress**("127.0.0.1",8080)
> - 获取主机名或域名：**String getHostName()**
> - 获取封装的*InetAddress*类：**InetAddress getAddress()**
> - 获取封装的端口号：**int getPort()
>** 


### TCP编程

**服务端**
- 创建*ServerSocket*类绑定端口
- 调用*accpet()* 方法监听链接，并返回链接对象的*Socket*对象
- 通过*Socket*对象获取输入输出流对象
- 通过流对象进行数据传输
- 通过*Socket.shutdownOutput() 和 Socket.shutdownInput()* 方法进行半关闭

**示例**
```java
public class TcpServerDemo03 {
	public static void main(String[] args) throws Exception {
		//1. 开启 ServerSocket
		ServerSocket serverSocket = new ServerSocket(9090);
		//2. 侦听 客户端 Socket
		Socket socket = serverSocket.accept();
		//3. 获取输入流
		InputStream is = socket.getInputStream();
		//4. 读取接收的文件并保存
		FileOutputStream fos = new FileOutputStream(new File("receive2.jpg"));
		byte[] buffer = new byte[1024];
		int len;
		while ((len=is.read(buffer))!=-1){
			fos.write(buffer,0,len);
		}
		//通知客户端接收成功
		OutputStream outputStream = socket.getOutputStream();
		outputStream.write("文件已经成功收到，OK".getBytes());
		//5.关闭资源,应该使用 try-catch-finally
		outputStream.close();
		fos.close();
		is.close();
		socket.close();
		serverSocket.close();
	}
}
```


**客户端**
- 创建*Socket*对象，绑定Sever端的IP地址(*InetAdderss*对象)和端口号
- 链接成功后，通过*Socket* 对象获取输入输出流
- 通过流对象进行数据传输
- 通过*Socket.shutdownOutput() 和 Socket.shutdownInput()* 方法进行半关闭

**示例**
```java
public class TcpClientDemo03 {
	public static void main(String[] args) throws Exception{
		//1. 创建socket连接
		Socket socket = new Socket(InetAddress.getByName("127.0.0.1"),
		9090);
		//2. 创建一个输出流
		OutputStream os = socket.getOutputStream();
		//3. 读取文件
		FileInputStream fis = new FileInputStream(new File("qinjiang.jpg"));
		//4. 写出文件
		byte[] buffer = new byte[1024];
		int len;
		while ((len=fis.read(buffer))!=-1){
			os.write(buffer,0,len);
		}
		//告诉服务器，我传输完了,关闭数据的输出，不然就会一直阻塞！
		socket.shutdownOutput();
		//先别着急关，等待服务器响应，响应到控制台，注意重复的变量问题！
		InputStream inputStream = socket.getInputStream();
		ByteArrayOutputStream baos = new ByteArrayOutputStream();
		byte[] buffer2 = new byte[1024];
		int len2;
		while ((len2=inputStream.read(buffer2))!=-1){
			baos.write(buffer2,0,len2);
		}
		System.out.println(baos.toString());
		//5. 资源关闭,应该使用 try-catch-finally
		baos.close();
		inputStream.close();
		fis.close();
		os.close();
		socket.close();
	}
}
```