<?xml version="1.0" encoding="UTF-8"?><xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve"><fields/><annots><highlight page="35" rect="65.206,317.316,374.194,345.765" color="#FFCD45" flags="print" name="b3416f95-c0c8-1da2-edf1-45465882925f" title="Guest" subject="高亮" date="D:20220805142025+08'00'" creationdate="D:20220805142025+08'00'" coords="180.50314999999998,345.76495,374.19389999999987,345.76495,180.50314999999998,334.31365000000005,374.19389999999987,334.31365000000005,65.20639999999997,328.76755,155.44689999999997,328.76755,65.20639999999997,317.31624999999997,155.44689999999997,317.31624999999997"><contents>省略文件名时，服务器就会访问 /dir/index.html
或者 /dir/default.htm。</contents></highlight><highlight page="35" rect="99.330,444.308,281.730,455.759" color="#FFCD45" flags="print" name="e4694db8-ab2a-0c78-c9ce-f243dc22ce04" title="Guest" subject="高亮" date="D:20220805142032+08'00'" creationdate="D:20220805142032+08'00'" coords="99.33040000000003,455.75927500000006,281.73040000000003,455.75927500000006,99.33040000000003,444.30797500000006,281.73040000000003,444.30797500000006"><contents>http://www.lab.glasscom.com/dir/</contents></highlight><highlight page="38" rect="86.591,522.872,157.183,533.503" color="#FFCD45" flags="print" name="23c4c159-0215-5363-b8ca-e220859d45f8" title="Guest" subject="高亮" date="D:20220805142617+08'00'" creationdate="D:20220805142617+08'00'" coords="86.5913,533.5033999999999,157.1828,533.5033999999999,86.5913,522.87215,157.1828,522.87215"><contents>HTTP的主要方法</contents></highlight><highlight page="46" rect="86.591,328.770,157.183,339.401" color="#FFCD45" flags="print" name="4fe9e7b6-5e8d-fdc9-de2a-849d44214870" title="Guest" subject="高亮" date="D:20220805145053+08'00'" creationdate="D:20220805145053+08'00'" coords="86.5913,339.4011,157.1828,339.4011,86.5913,328.76984999999996,157.1828,328.76984999999996"><contents>HTTP状态码概要</contents></highlight><highlight page="47" rect="93.554,216.850,360.076,244.570" color="#FFCD45" flags="print" name="9d7ade1c-575b-e43f-fc8f-f2a76de73388" title="Guest" subject="高亮" date="D:20220805145358+08'00'" creationdate="D:20220805145358+08'00'" coords="93.55439999999997,244.57047500000004,360.0759499999998,244.57047500000004,93.55439999999997,233.34860000000003,360.0759499999998,233.34860000000003,93.55439999999997,228.07182500000005,227.07404999999997,228.07182500000005,93.55439999999997,216.84995000000004,227.07404999999997,216.84995000000004"><contents>1 条请求消息中只能写 1 个URI。如果需要获取多个文件，必须
对每个文件单独发送 1 条请求。</contents></highlight><highlight page="51" rect="65.195,385.738,378.923,448.200" color="#FFCD45" flags="print" name="2ca6b052-d0eb-e495-956a-a92afa9583ba" title="Guest" subject="高亮" date="D:20220805150256+08'00'" creationdate="D:20220805150256+08'00'" coords="203.06089999999998,448.2001250000001,374.1749000000001,448.2001250000001,203.06089999999998,436.7488250000001,374.1749000000001,436.7488250000001,65.20640000000002,432.534048046875,374.1764,432.534048046875,65.20640000000002,419.7514250000001,374.1764,419.7514250000001,65.19839999999998,415.454540625,378.9233,415.454540625,65.19839999999998,402.73842499999995,378.9233,402.73842499999995,65.19529999999997,398.454540625,281.5749,398.454540625,65.19529999999997,385.73842499999995,281.5749,385.73842499999995"><contents>TCP/IP 的结构如图 1.8 所示，就是由一些
小的子网，通过路由器 A 连接起来组成一个大的网络。这里的子网可以理解
为用集线器 B 连接起来的几台计算机 C，我们将它看作一个单位，称为子网。
将子网通过路由器连接起来，就形成了一个网络 D。</contents></highlight><highlight page="51" rect="82.450,117.556,374.230,142.432" color="#FFCD45" flags="print" name="12bacaae-0f5d-49b4-ea25-70dab506ffe8" title="Guest" subject="高亮" date="D:20220805150547+08'00'" creationdate="D:20220805150547+08'00'" coords="82.44990000000003,142.43220000000002,374.22989999999993,142.43220000000002,82.44990000000003,130.80420000000004,374.22989999999993,130.80420000000004,83.19690000000003,127.39319999999998,371.1969,127.39319999999998,83.19690000000003,117.55619999999999,371.1969,117.55619999999999"><contents>一些家用路由器中已经内置了集线器功能，因此大家可以理解为这种路由
器内部同时包含路由器和集线器两种设备，它们在里面已经连接起来了。</contents></highlight><highlight page="52" rect="94.934,86.471,144.463,95.471" color="#FFCD45" flags="print" name="dac0d32c-6ddb-4348-d8a9-48f8df8a4a9b" title="Guest" subject="高亮" date="D:20220805150948+08'00'" creationdate="D:20220805150948+08'00'" coords="94.9345,95.47130000000004,144.4633,95.47130000000004,94.9345,86.47130000000004,144.4633,86.47130000000004"><contents>IP 的基本思路</contents></highlight><highlight page="53" rect="106.273,109.180,171.802,118.180" color="#FFCD45" flags="print" name="60a1c9d6-8511-e359-6bfa-01a6cf14bfa4" title="Guest" subject="高亮" date="D:20220805151150+08'00'" creationdate="D:20220805151150+08'00'" coords="106.2731,118.17989999999998,171.8019,118.17989999999998,106.2731,109.17989999999998,171.8019,109.17989999999998"><contents>IP 地址的表示方法</contents></highlight><highlight page="53" rect="109.709,334.523,252.325,341.835" color="#FFCD45" flags="print" name="65bf5e93-4400-5b28-92f6-0bc284ea1056" title="Guest" subject="高亮" date="D:20220805151508+08'00'" creationdate="D:20220805151508+08'00'" coords="109.7088,341.8350999999999,252.32529999999997,341.8350999999999,109.7088,334.5225999999999,252.32529999999997,334.5225999999999"><contents>�</contents></highlight><highlight page="53" rect="109.351,283.101,226.351,290.414" color="#FFCD45" flags="print" name="4ceeee4d-0168-714f-7d2f-05b08f522f70" title="Guest" subject="高亮" date="D:20220805151514+08'00'" creationdate="D:20220805151514+08'00'" coords="109.3513,290.4135999999999,226.35129999999998,290.4135999999999,109.3513,283.1010999999999,226.35129999999998,283.1010999999999"><contents>�</contents></highlight><highlight page="53" rect="109.709,229.983,155.209,237.296" color="#FFCD45" flags="print" name="a5bbb6a7-7c0c-0a96-866e-404ab89c36b7" title="Guest" subject="高亮" date="D:20220805151533+08'00'" creationdate="D:20220805151533+08'00'" coords="109.7088,237.29559999999992,155.2088,237.29559999999992,109.7088,229.98309999999992,155.2088,229.98309999999992"><contents></contents></highlight><highlight page="53" rect="152.680,188.999,344.788,203.864" color="#FFCD45" flags="print" name="08ce8f42-eba9-564b-876a-9ada3b6c095d" title="Guest" subject="高亮" date="D:20220805151538+08'00'" creationdate="D:20220805151538+08'00'" coords="152.68040000000002,203.86440000000005,344.78790000000004,203.86440000000005,152.68040000000002,196.49990000000003,344.78790000000004,196.49990000000003,152.68040000000002,196.3634,204.68040000000002,196.3634,152.68040000000002,188.99890000000005,204.68040000000002,188.99890000000005"><contents>�����
</contents></highlight><highlight page="53" rect="109.709,169.358,174.709,176.670" color="#FFCD45" flags="print" name="f1edd8df-41bf-1aab-c973-dda18a40b376" title="Guest" subject="高亮" date="D:20220805151614+08'00'" creationdate="D:20220805151614+08'00'" coords="109.7088,176.67009999999988,174.7088,176.67009999999988,109.7088,169.35759999999988,174.7088,169.35759999999988"><contents></contents></highlight><highlight page="53" rect="152.901,135.374,332.009,142.738" color="#FFCD45" flags="print" name="81d78268-8496-32c5-e866-a9e74ea5bdf9" title="Guest" subject="高亮" date="D:20220805151618+08'00'" creationdate="D:20220805151618+08'00'" coords="152.9011,142.7384,332.0086,142.7384,152.9011,135.37390000000005,332.0086,135.37390000000005"><contents>�����</contents></highlight><highlight page="54" rect="53.858,504.738,362.836,533.187" color="#FFCD45" flags="print" name="2fefede3-b5da-2a0d-97d7-0470f88e1ab0" title="Guest" subject="高亮" date="D:20220805151728+08'00'" creationdate="D:20220805151728+08'00'" coords="96.6368,533.1871250000002,362.83630000000005,533.1871250000002,96.6368,521.7358250000001,362.83630000000005,521.7358250000001,53.8583,516.1897250000002,72.8583,516.1897250000002,53.8583,504.7384250000001,72.8583,504.7384250000001"><contents>子网掩码为 1 的部分表示网络号，子网掩码为 0 的部分表示主机
号。</contents></highlight><highlight page="54" rect="98.739,274.444,356.763,302.936" color="#FFCD45" flags="print" name="380fa953-a9a9-0086-11a0-52a8945e0ccf" title="Guest" subject="高亮" date="D:20220805151905+08'00'" creationdate="D:20220805151905+08'00'" coords="98.73875,302.93639999999994,356.7612499999998,302.93639999999994,98.73875,294.43889999999993,356.7612499999998,294.43889999999993,98.74099999999999,292.93889999999993,356.76349999999974,292.93889999999993,98.74099999999999,284.4414,356.76349999999974,284.4414,98.74099999999999,282.9414,136.24099999999999,282.9414,98.74099999999999,274.4439,136.24099999999999,274.4439"><contents>子网掩码表示网络号与主机号之间的边界。在本例中，这个边界与字节的边界
是正好吻合的，也就是正好划分在句点的位置上，实际上也可以划分在字节的
中间位置。</contents></highlight><highlight page="54" rect="82.197,124.828,287.916,169.047" color="#FFCD45" flags="print" name="0c243b91-2c5f-35f9-7e54-6ac53ca2e3a7" title="Guest" subject="高亮" date="D:20220805151941+08'00'" creationdate="D:20220805151941+08'00'" coords="82.19679999999994,169.04717499999998,150.51509999999993,169.04717499999998,82.19679999999994,157.82529999999997,150.51509999999993,157.82529999999997,82.19679999999994,152.54852499999998,164.41644999999994,152.54852499999998,82.19679999999994,141.32664999999997,164.41644999999994,141.32664999999997,82.19679999999994,136.049875,287.91644999999994,136.049875,82.19679999999994,124.82799999999997,287.91644999999994,124.82799999999997"><contents>IP 地址的主机号
全0：表示整个子网
全1：表示向子网上所有设备发送包，即“广播”</contents></highlight><highlight page="55" rect="65.210,232.754,374.197,278.200" color="#FFCD45" flags="print" name="760b1b22-03a5-ac7a-db3d-e7519e32bfbb" title="Guest" subject="高亮" date="D:20220805152132+08'00'" creationdate="D:20220805152132+08'00'" coords="198.5517999999999,278.20012499999996,374.1877999999999,278.20012499999996,198.5517999999999,266.74882499999995,374.1877999999999,266.74882499999995,65.20979999999992,261.20272499999993,374.1972999999999,261.20272499999993,65.20979999999992,249.75142499999993,374.1972999999999,249.75142499999993,65.21929999999992,245.454540625,185.00830000000002,245.454540625,65.21929999999992,232.75402499999996,185.00830000000002,232.75402499999996"><contents>使用 IP 地址只需要处理 4 字节的数字，而
域名则需要处理几十个到 255 个字节的字符，这增加了路由器的负担，传送
数据也会花费更长的时间D。</contents></highlight><highlight page="55" rect="82.450,55.895,374.104,80.771" color="#FFCD45" flags="print" name="550ff93c-4410-acfc-decb-540ae37521de" title="Guest" subject="高亮" date="D:20220805152223+08'00'" creationdate="D:20220805152223+08'00'" coords="82.44990000000007,80.77089999999998,374.10389999999995,80.77089999999998,82.44990000000007,69.14290000000005,374.10389999999995,69.14290000000005,83.19690000000006,65.7319,335.1969,65.7319,83.19690000000006,55.89490000000001,335.1969,55.89490000000001"><contents>域名并不仅是长，而且其长度是不固定的。处理长度不固定的数据比处理
长度固定的数据要复杂，这也是造成效率低下的重要原因之一。</contents></highlight><highlight page="56" rect="53.858,248.326,362.846,310.770" color="#FFCD45" flags="print" name="c07bc2c3-3dd5-059d-a800-42a7285a2a07" title="Guest" subject="高亮" date="D:20220805152730+08'00'" creationdate="D:20220805152730+08'00'" coords="205.9722999999999,310.769625,362.8363,310.769625,205.9722999999999,299.318325,362.8363,299.318325,53.858299999999915,293.772225,362.8458,293.772225,53.858299999999915,282.320925,362.8458,282.320925,53.86779999999996,276.774825,362.84579999999994,276.774825,53.86779999999996,265.323525,362.84579999999994,265.323525,53.86779999999996,259.777425,321.96729999999997,259.777425,53.86779999999996,248.326125,321.96729999999997,248.326125"><contents>，对于DNS 服务器，我们的计算机上
一定有相应的 DNS 客户端，而相当于 DNS 客户端的部分称为 DNS 解析
器，或者简称解析器。通过 DNS 查询 IP 地址的操作称为域名解析，因此
负责执行解析（resolution）这一操作的就叫解析器（resolver）了。</contents></highlight><highlight page="56" rect="72.877,231.329,324.494,242.780" color="#FFCD45" flags="print" name="31f6c353-6039-fab8-fecc-bbc061a05d7d" title="Guest" subject="高亮" date="D:20220805152743+08'00'" creationdate="D:20220805152743+08'00'" coords="72.87729999999998,242.78002500000002,324.49429999999995,242.78002500000002,72.87729999999998,231.32872499999996,324.49429999999995,231.32872499999996"><contents>解析器实际上是一段程序，它包含在操作系统的 Socket 库中</contents></highlight><highlight page="56" rect="71.048,61.553,362.837,100.433" color="#FFCD45" flags="print" name="47419516-5407-760e-bde7-ea844959882b" title="Guest" subject="高亮" date="D:20220805152805+08'00'" creationdate="D:20220805152805+08'00'" coords="71.0483,100.4332,362.8373,100.4332,71.0483,88.80520000000001,362.8373,88.80520000000001,71.8583,85.39419999999996,362.79229999999995,85.39419999999996,71.8583,75.55719999999997,362.79229999999995,75.55719999999997,71.85829999999997,71.39020000000005,332.85829999999993,71.39020000000005,71.85829999999997,61.55320000000006,332.85829999999993,61.55320000000006"><contents>DNS：Domain Name System，域名服务系统。将服务器名称和 IP 地址进行
关联是 DNS 最常见的用法，但 DNS 的功能并不仅限于此，它还可以将邮
件地址和邮件服务器进行关联，以及为各种信息关联相应的名称。</contents></highlight><highlight page="58" rect="53.853,121.805,362.828,133.257" color="#FFCD45" flags="print" name="cc29a4b4-af0c-f365-5ad4-7a3c301d993d" title="Guest" subject="高亮" date="D:20220805153712+08'00'" creationdate="D:20220805153712+08'00'" coords="53.85340000000002,133.25662499999999,362.8276000000001,133.25662499999999,53.85340000000002,121.80532499999998,362.8276000000001,121.80532499999998"><contents>发送消息这个操作并不是由解析器自身来执行，而是要委托给操作系统内</contents></highlight><highlight page="60" rect="53.858,521.736,150.777,534.534" color="#FFCD45" flags="print" name="dd05e3da-7a62-a14c-6d8e-e06165c861df" title="Guest" subject="高亮" date="D:20220805153718+08'00'" creationdate="D:20220805153718+08'00'" coords="53.8583,534.534048046875,150.77720000000002,534.534048046875,53.8583,521.7358250000001,150.77720000000002,521.7358250000001"><contents>部的协议栈 A 来执行。</contents></highlight><highlight page="60" rect="71.048,60.805,363.467,72.433" color="#FFCD45" flags="print" name="cae9bee7-cb38-08ad-4bef-1835cc344d05" title="Guest" subject="高亮" date="D:20220805153723+08'00'" creationdate="D:20220805153723+08'00'" coords="71.0483,72.43319999999994,363.46729999999997,72.43319999999994,71.0483,60.80520000000001,363.46729999999997,60.80520000000001"><contents>协议栈：操作系统内部的网络控制软件，也叫“协议驱动”“TCP/IP驱动”等。</contents></highlight><highlight page="61" rect="112.706,138.346,283.706,149.797" color="#FFCD45" flags="print" name="0fb7d581-a13b-5bc3-572a-1c0618a5ebb3" title="Guest" subject="高亮" date="D:20220805161923+08'00'" creationdate="D:20220805161923+08'00'" coords="112.70630000000003,149.79722500000003,283.70630000000006,149.79722500000003,112.70630000000003,138.34592499999997,283.70630000000006,138.34592499999997"><contents>来自客户端的查询消息包含以下 3 种信息</contents></highlight><highlight page="61" rect="101.211,113.349,120.211,124.800" color="#FFCD45" flags="print" name="10478691-d7d0-cf33-d470-85c3c655ba7a" title="Guest" subject="高亮" date="D:20220805161931+08'00'" creationdate="D:20220805161931+08'00'" coords="101.21130000000004,124.79987499999999,120.21130000000005,124.79987499999999,101.21130000000004,113.34857499999998,120.21130000000005,113.34857499999998"><contents>域名</contents></highlight><highlight page="61" rect="101.207,79.354,121.793,90.805" color="#FFCD45" flags="print" name="eb2d123c-9c38-3566-3081-28cd6727e446" title="Guest" subject="高亮" date="D:20220805161933+08'00'" creationdate="D:20220805161933+08'00'" coords="101.20655000000008,90.80507499999999,121.79305000000008,90.80507499999999,101.20655000000008,79.35377500000004,121.79305000000008,79.35377500000004"><contents>Class</contents></highlight><highlight page="62" rect="89.869,487.741,127.869,499.192" color="#FFCD45" flags="print" name="9097ed16-a01c-768e-2f3c-68adbca06d31" title="Guest" subject="高亮" date="D:20220805161936+08'00'" creationdate="D:20220805161936+08'00'" coords="89.8693,499.19232500000015,127.8693,499.19232500000015,89.8693,487.74102500000015,127.8693,487.74102500000015"><contents>记录类型</contents></highlight><highlight page="62" rect="99.808,63.723,182.616,72.723" color="#FFCD45" flags="print" name="8cbf4edf-3811-6498-8002-db4b10227616" title="Guest" subject="高亮" date="D:20220805162212+08'00'" creationdate="D:20220805162212+08'00'" coords="99.8085,72.72320000000002,182.61649999999997,72.72320000000002,99.8085,63.72320000000002,182.61649999999997,63.72320000000002"><contents>DNS服务器的基本工作</contents></highlight><highlight page="63" rect="82.585,64.924,378.685,117.808" color="#FFCD45" flags="print" name="8ef0c6f5-bd7d-32d6-d408-f11e02da3eac" title="Guest" subject="高亮" date="D:20220805162444+08'00'" creationdate="D:20220805162444+08'00'" coords="82.5848,117.80829999999997,378.64880000000016,117.80829999999997,82.5848,106.18029999999999,378.64880000000016,106.18029999999999,83.1968,102.76929999999999,378.68479999999994,102.76929999999999,83.1968,92.93229999999994,378.68479999999994,92.93229999999994,83.20580000000001,88.76530000000002,374.13980000000015,88.76530000000002,83.20580000000001,78.92830000000004,374.13980000000015,78.92830000000004,83.20580000000001,74.7613,329.7068,74.7613,83.20580000000001,64.92430000000002,329.7068,64.92430000000002"><contents>不仅是 Web 服务器，像邮件服务器、数据库服务器等，无论任何服务器，
只要注册了A类型的记录，都可以作为服务器的域名来使用。准确来说，
A类型的记录表示与 IP 地址所对应的域名，因此与其说是某个服务器的
域名，不如说是被分配了某个 IP 地址的某台具体设备的域名。</contents></highlight><highlight page="64" rect="82.210,352.824,348.721,380.544" color="#FFCD45" flags="print" name="b0223a3e-5455-020c-404c-b7033fd67790" title="Guest" subject="高亮" date="D:20220805162633+08'00'" creationdate="D:20220805162633+08'00'" coords="82.20950000000005,380.5444749999999,348.7206000000001,380.5444749999999,82.20950000000005,369.3225999999999,348.7206000000001,369.3225999999999,82.20950000000005,364.0458249999999,143.40280000000004,364.0458249999999,82.20950000000005,352.82394999999997,143.40280000000004,352.82394999999997"><contents>DNS 服务器会从域名与 IP 地址的对照表中查找相应的记录，并
返回 IP 地址。</contents></highlight><highlight page="64" rect="91.871,302.749,231.740,314.201" color="#FFCD45" flags="print" name="01832682-63f5-c68c-c68c-e8d2aead48ec" title="Guest" subject="高亮" date="D:20220805162652+08'00'" creationdate="D:20220805162652+08'00'" coords="91.87100000000004,314.2007499999999,231.73950000000002,314.2007499999999,91.87100000000004,302.7494499999999,231.73950000000002,302.7494499999999"><contents>根据 IP 地址反查域名的 PTR类型</contents></highlight><highlight page="64" rect="53.862,285.752,362.840,314.201" color="#FFCD45" flags="print" name="ddb23f10-1735-0d5d-0c4a-a6721c8946af" title="Guest" subject="高亮" date="D:20220805162718+08'00'" creationdate="D:20220805162718+08'00'" coords="240.66000000000003,314.2007499999999,362.83950000000004,314.2007499999999,240.66000000000003,302.7494499999999,362.83950000000004,302.7494499999999,53.86150000000003,297.2033499999999,73.72125000000003,297.2033499999999,53.86150000000003,285.75204999999994,73.72125000000003,285.75204999999994"><contents>查询域名相关别名的CNAME
类型</contents></highlight><highlight page="64" rect="84.091,285.752,239.392,297.203" color="#FFCD45" flags="print" name="c15acb15-4ce0-238d-9f7e-bfa3fe05f479" title="Guest" subject="高亮" date="D:20220805162724+08'00'" creationdate="D:20220805162724+08'00'" coords="84.09050000000002,297.2033499999999,239.39175,297.2033499999999,84.09050000000002,285.75204999999994,239.39175,285.75204999999994"><contents>查询 DNS 服务器 IP 地址的 NS 类型</contents></highlight><highlight page="64" rect="71.174,61.557,362.922,86.433" color="#FFCD45" flags="print" name="c3239b5c-8d9a-40d3-464f-ae7fc4d463d2" title="Guest" subject="高亮" date="D:20220805163035+08'00'" creationdate="D:20220805163035+08'00'" coords="71.1743,86.43320000000006,362.92189999999994,86.43320000000006,71.1743,74.80520000000001,362.92189999999994,74.80520000000001,71.8583,71.39419999999996,314.8583,71.39419999999996,71.8583,61.557199999999966,314.8583,61.557199999999966"><contents>当一个邮件地址对应多个邮件服务器时，需要根据优先级来判断哪个邮件
服务器是优先的。优先级数值较小的邮件服务器代表更优先。</contents></highlight><highlight page="65" rect="65.200,249.744,378.918,313.534" color="#FFCD45" flags="print" name="e33c21ed-4df2-671b-6e64-0c7649bbfbbe" title="Guest" subject="高亮" date="D:20220805163212+08'00'" creationdate="D:20220805163212+08'00'" coords="289.48549999999994,313.534048046875,374.17799999999994,313.534048046875,289.48549999999994,300.769625,374.17799999999994,300.769625,65.19999999999993,295.18972499999995,374.17799999999994,295.18972499999995,65.19999999999993,283.73842499999995,374.17799999999994,283.73842499999995,65.19999999999993,278.192325,378.9184999999999,278.192325,65.19999999999993,266.741025,378.9184999999999,266.741025,65.1999999999999,261.19492499999996,94.33649999999989,261.19492499999996,65.1999999999999,249.74362499999995,94.33649999999989,249.74362499999995"><contents>在域名中，越靠右的
位置表示其层级越高，比如www.lab.glasscom.com 这个域名如果按照公司
里的组织结构来说，大概就是“com 事业集团 glasscom 部 lab 科的www”
这样。</contents></highlight><highlight page="65" rect="65.209,232.746,374.197,261.195" color="#FFCD45" flags="print" name="9da65d59-f9e6-b909-8355-8c6b9414a839" title="Guest" subject="高亮" date="D:20220805163229+08'00'" creationdate="D:20220805163229+08'00'" coords="94.9729999999999,261.19492499999996,374.1969999999999,261.19492499999996,94.9729999999999,249.74362499999995,374.1969999999999,249.74362499999995,65.2094999999999,244.19752499999993,325.1389999999999,244.19752499999993,65.2094999999999,232.74622499999998,325.1389999999999,232.74622499999998"><contents>其中，相当于一个层级的部分称为域。因此，com 域的下一层是
glasscom 域，再下一层是 lab 域，再下面才是www这个名字。</contents></highlight><highlight page="65" rect="65.228,181.754,378.956,210.203" color="#FFCD45" flags="print" name="b09624a8-622f-8d9d-3557-455c80d6bd24" title="Guest" subject="高亮" date="D:20220805163327+08'00'" creationdate="D:20220805163327+08'00'" coords="238.97399999999988,210.20272499999993,374.1969999999999,210.20272499999993,238.97399999999988,198.75142499999993,374.1969999999999,198.75142499999993,65.22849999999988,193.2053249999999,378.95649999999995,193.2053249999999,65.22849999999988,181.75402499999996,378.95649999999995,181.75402499999996"><contents>一个域的信息是作为一个整体存
放在 DNS 服务器中的，不能将一个域拆开来存放在多台 DNS 服务器中。</contents></highlight><highlight page="65" rect="65.219,96.767,374.206,125.216" color="#FFCD45" flags="print" name="bb961816-d337-e9dd-26ca-b478d6ca204d" title="Guest" subject="高亮" date="D:20220805163423+08'00'" creationdate="D:20220805163423+08'00'" coords="93.92799999999994,125.2157249999999,374.20649999999995,125.2157249999999,93.92799999999994,113.7644249999999,374.20649999999995,113.7644249999999,65.21899999999994,108.21832499999994,231.58299999999994,108.21832499999994,65.21899999999994,96.76702499999988,231.58299999999994,96.76702499999988"><contents>。于是，DNS 服务器也具有了像域名一样的层次结构，每个域的信
息都存放在相应层级的DNS 服务器中。</contents></highlight><highlight page="64" rect="91.535,170.582,168.535,183.089" color="#FFCD45" flags="print" name="2cf0f9ae-426a-ed5f-b44e-3112a17133ae" title="Guest" subject="高亮" date="D:20220805164955+08'00'" creationdate="D:20220805164955+08'00'" coords="91.53500000000001,183.0888,168.53500000000003,183.0888,91.53500000000001,170.58179999999993,168.53500000000003,170.58179999999993"><contents>域名的层次结构</contents></highlight><highlight page="66" rect="53.834,266.762,367.572,329.205" color="#FFCD45" flags="print" name="80887012-cfb7-fe30-d7bc-9c91acad4c73" title="Guest" subject="高亮" date="D:20220805165053+08'00'" creationdate="D:20220805165053+08'00'" coords="232.24439999999993,329.2053249999999,362.8123999999999,329.2053249999999,232.24439999999993,317.75402499999996,362.8123999999999,317.75402499999996,53.834399999999974,312.20792499999993,362.80289999999997,312.20792499999993,53.834399999999974,300.75662499999993,362.80289999999997,300.75662499999993,53.8344,295.2105249999999,367.5719,295.2105249999999,53.8344,283.7592249999999,367.5719,283.7592249999999,53.84390000000002,278.2131249999999,202.68040000000002,278.2131249999999,53.84390000000002,266.76182499999993,202.68040000000002,266.76182499999993"><contents>比如 www.nikkeibp.co.jp 这个域
名，最上层的 jp 代表分配给日本这个国家的域；下一层的 co 是日本国内
进行分类的域，代表公司；再下层的 nikkeibp 就是分配给某个公司的域；
最下层的www就是服务器的名称。</contents></highlight><highlight page="66" rect="270.230,129.316,362.836,140.767" color="#FFCD45" flags="print" name="c575a9ae-9e34-8c25-e6d7-6abd65bf9295" title="Guest" subject="高亮" date="D:20220805165317+08'00'" creationdate="D:20220805165317+08'00'" coords="270.23029999999994,140.76702499999993,362.8362999999999,140.76702499999993,270.23029999999994,129.31572499999993,362.8362999999999,129.31572499999993"><contents>负责管理 lab.glasscom.</contents></highlight><highlight page="67" rect="65.197,470.744,374.194,533.187" color="#FFCD45" flags="print" name="dfdd42ee-777a-72e1-4695-aaaaa2ae2266" title="Guest" subject="高亮" date="D:20220805165323+08'00'" creationdate="D:20220805165323+08'00'" coords="65.1969,533.1871250000002,374.1749,533.1871250000002,65.1969,521.7358250000001,374.1749,521.7358250000001,65.20639999999997,516.1897250000002,374.1749,516.1897250000002,65.20639999999997,504.7384250000001,374.1749,504.7384250000001,65.1969,499.19232500000015,374.1939,499.19232500000015,65.1969,487.74102500000015,374.1939,487.74102500000015,65.1969,482.1949250000001,361.01739999999995,482.1949250000001,65.1969,470.7436250000001,361.01739999999995,470.7436250000001"><contents>com 这个域的 DNS 服务器的 IP 地址需要注册到 glasscom.com 域的 DNS
服务器中，而 glasscom.com 域的 DNS 服务器的 IP 地址又需要注册到 com
域的 DNS 服务器中。这样，我们就可以通过上级 DNS 服务器查询出下级
DNS 服务器的 IP 地址，也就可以向下级DNS服务器发送查询请求了。</contents></highlight><highlight page="67" rect="65.178,368.759,374.165,448.200" color="#FFCD45" flags="print" name="71b86dab-f2b0-c91e-2e82-5f14baea3ebb" title="Guest" subject="高亮" date="D:20220805165536+08'00'" creationdate="D:20220805165536+08'00'" coords="326.62739999999997,448.2001250000001,374.1654,448.2001250000001,326.62739999999997,436.7488250000001,374.1654,436.7488250000001,65.18739999999995,431.2027250000001,374.14639999999986,431.2027250000001,65.18739999999995,419.7514250000001,374.14639999999986,419.7514250000001,65.17789999999994,414.2053250000001,374.16539999999986,414.2053250000001,65.17789999999994,402.75402500000007,374.16539999999986,402.75402500000007,65.18739999999988,397.2079250000001,374.15589999999986,397.2079250000001,65.18739999999988,385.7566250000001,374.15589999999986,385.7566250000001,65.18739999999993,380.2105250000001,161.61239999999992,380.2105250000001,65.18739999999993,368.7592250000001,161.61239999999992,368.7592250000001"><contents>。在互联网
中，com 和 jp 的上面还有一级域，称为根域。根域不像 com、jp 那样有自
己的名字，因此在一般书写域名时经常被省略，如果要明确表示根域，应
该像www.lab.glasscom.com. 这样在域名的最后再加上一个句点，而这个最
后的句点就代表根域。</contents></highlight><highlight page="67" rect="65.192,181.738,374.203,227.234" color="#FFCD45" flags="print" name="336ac38e-7dc3-f862-ec69-6c35a2496b62" title="Guest" subject="高亮" date="D:20220805165726+08'00'" creationdate="D:20220805165726+08'00'" coords="273.3229,227.233925,374.2034,227.233925,273.3229,215.782625,374.2034,215.782625,65.23489999999998,211.534048046875,374.17010000000005,211.534048046875,65.23489999999998,198.78522500000008,374.17010000000005,198.78522500000008,65.19210000000001,193.18972499999995,313.2371,193.18972499999995,65.19210000000001,181.738425,313.2371,181.738425"><contents>分配给根域 DNS 服务器
的 IP 地址在全世界仅有 13 个 A，而且这些地址几乎不发生变化，因此将这
些地址保存在所有的 DNS 服务器中也并不是一件难事。</contents></highlight><highlight page="67" rect="82.567,60.849,374.158,85.725" color="#FFCD45" flags="print" name="e56615c2-5903-068c-570e-b0133919a484" title="Guest" subject="高亮" date="D:20220805165919+08'00'" creationdate="D:20220805165919+08'00'" coords="82.5669,85.72460000000001,374.15790000000004,85.72460000000001,82.5669,74.09659999999997,374.15790000000004,74.09659999999997,83.1969,70.68560000000002,286.9479,70.68560000000002,83.1969,60.84860000000003,286.9479,60.84860000000003"><contents>根域 DNS 服务器在运营上使用多台服务器来对应一个 IP 地址，因此尽管
IP 地址只有 13 个，但其实服务器的数量是很多的。</contents></highlight><text page="67" rect="82.567,54.725,113.567,85.725" color="#FFFF00" flags="print,nozoom,norotate" inreplyto="e56615c2-5903-068c-570e-b0133919a484" name="d15a7a7a-e4d7-6ef3-3a7b-1168edddde28" title="Guest" subject="注释" date="D:20220805170057+08'00'" creationdate="D:20220805170057+08'00'" icon="Comment" statemodel="Review"><trn-custom-data bytes="{&quot;trn-mention&quot;:&quot;{\&quot;contents\&quot;:\&quot;是怎样做到一个IP地址对应多个服务器的？\&quot;,\&quot;ids\&quot;:[]}&quot;}"/><contents>是怎样做到一个IP地址对应多个服务器的？</contents></text><highlight page="68" rect="99.808,227.735,176.616,236.735" color="#FFCD45" flags="print" name="511368f0-5b56-5662-0216-7bdccc31cf8b" title="Guest" subject="高亮" date="D:20220805170221+08'00'" creationdate="D:20220805170221+08'00'" coords="99.8085,236.735,176.61649999999997,236.735,99.8085,227.735,176.61649999999997,227.735"><contents>找到目标 DNS服务器</contents></highlight><highlight page="69" rect="111.147,48.668,209.955,57.668" color="#FFCD45" flags="print" name="2b6cf013-1f9d-d158-09e3-4beec94fd7f9" title="Guest" subject="高亮" date="D:20220805170443+08'00'" creationdate="D:20220805170443+08'00'" coords="111.14710000000001,57.66809999999998,209.95510000000002,57.66809999999998,111.14710000000001,48.66809999999998,209.95510000000002,48.66809999999998"><contents>DNS服务器之间的查询操作</contents></highlight><highlight page="70" rect="91.535,355.582,252.794,368.089" color="#FFCD45" flags="print" name="8579fe01-63ba-1c2c-2168-99727e5d422d" title="Guest" subject="高亮" date="D:20220805171015+08'00'" creationdate="D:20220805171015+08'00'" coords="91.53500000000001,368.08880000000005,252.79390000000004,368.08880000000005,91.53500000000001,355.58180000000004,252.79390000000004,355.58180000000004"><contents>通过缓存加快 DNS服务器的响应</contents></highlight><highlight page="70" rect="53.877,248.316,362.884,293.762" color="#FFCD45" flags="print" name="9fee5416-c8d5-2af9-740d-03abb7fc9652" title="Guest" subject="高亮" date="D:20220805171136+08'00'" creationdate="D:20220805171136+08'00'" coords="201.22229999999988,293.76182500000004,362.87430000000006,293.76182500000004,201.22229999999988,282.31052500000004,362.87430000000006,282.31052500000004,53.87729999999989,276.764425,362.88379999999984,276.764425,53.87729999999989,265.313125,362.88379999999984,265.313125,53.87729999999984,259.76702500000005,319.8772999999999,259.76702500000005,53.87729999999984,248.31572500000004,319.8772999999999,248.31572500000004"><contents>现实中上级域和下级域有可能共享同一
台 DNS 服务器。在这种情况下，访问上级 DNS 服务器时就可以向下跳过
一级DNS服务器，直接返回再下一级 DNS服务器的相关信息。</contents></highlight><highlight page="70" rect="53.868,146.313,362.846,174.762" color="#FFCD45" flags="print" name="e891ffb1-819a-e796-ace6-9b125d8cc5fb" title="Guest" subject="高亮" date="D:20220805171254+08'00'" creationdate="D:20220805171254+08'00'" coords="102.13740000000001,174.76182499999993,362.84590000000003,174.76182499999993,102.13740000000001,163.31052499999998,362.84590000000003,163.31052499999998,53.86789999999998,157.76442499999996,319.86789999999996,157.76442499999996,53.86789999999998,146.31312499999996,319.86789999999996,146.31312499999996"><contents>当要查询的域名不存在时，“不存在”这一响应结果也会被缓
存。这样，当下次查询这个不存在的域名时，也可以快速响应。</contents></highlight><highlight page="70" rect="333.063,112.318,362.855,123.770" color="#FFCD45" flags="print" name="cc04611d-a607-9b8d-38e9-523b10b6d159" title="Guest" subject="高亮" date="D:20220805171300+08'00'" creationdate="D:20220805171300+08'00'" coords="333.06339999999994,123.7696249999999,362.8553999999999,123.7696249999999,333.06339999999994,112.31832499999996,362.8553999999999,112.31832499999996"><contents>DNS服</contents></highlight><highlight page="71" rect="65.197,504.738,374.184,533.187" color="#FFCD45" flags="print" name="6cef72b8-21a8-c2c0-cd66-1e427b058cae" title="Guest" subject="高亮" date="D:20220805171307+08'00'" creationdate="D:20220805171307+08'00'" coords="65.1969,533.1871250000002,374.18439999999987,533.1871250000002,65.1969,521.7358250000001,374.18439999999987,521.7358250000001,65.20639999999995,516.1897250000002,158.50589999999994,516.1897250000002,65.20639999999995,504.7384250000001,158.50589999999994,504.7384250000001"><contents>务器中保存的信息都设置有一个有效期，当缓存中的信息超过有效期后，数
据就会从缓存中删除。</contents></highlight><highlight page="71" rect="93.518,168.619,360.011,196.340" color="#FFCD45" flags="print" name="251be17f-1306-5012-ad6b-cd7ea20c2431" title="Guest" subject="高亮" date="D:20220805171632+08'00'" creationdate="D:20220805171632+08'00'" coords="93.51759999999999,196.33977499999997,360.01065000000006,196.33977499999997,93.51759999999999,185.11789999999996,360.01065000000006,185.11789999999996,93.51759999999999,179.84112499999998,212.75019999999998,179.84112499999998,93.51759999999999,168.61924999999997,212.75019999999998,168.61924999999997"><contents>向操作系统内部的协议栈发出委托时，需要按照指定的顺序来调
用 Socket 库中的程序组件。</contents></highlight><highlight page="76" rect="71.129,61.550,362.892,100.430" color="#FFCD45" flags="print" name="96c28b2e-6847-0fdb-2607-8044945ab1ad" title="Guest" subject="高亮" date="D:20220805174232+08'00'" creationdate="D:20220805174232+08'00'" coords="71.12929999999997,100.43020000000001,362.83730000000014,100.43020000000001,71.12929999999997,88.80219999999997,362.83730000000014,88.80219999999997,71.86729999999997,85.39120000000003,362.89220000000006,85.39120000000003,71.86729999999997,75.55420000000004,362.89220000000006,75.55420000000004,71.86729999999997,71.3872,109.11829999999998,71.3872,71.86729999999997,61.55020000000002,109.11829999999998,61.55020000000002"><contents>准确地说，IP 地址不是分配给每一台设备的，而是分配给设备中安装的网
络硬件的。因此，如果一台设备中安装了多个网络硬件，那么就会有多个
IP 地址。</contents></highlight><highlight page="79" rect="82.684,60.849,376.696,85.725" color="#FFCD45" flags="print" name="43e2d5c4-85e1-269d-40a1-5debcf3f0c5a" title="Guest" subject="高亮" date="D:20220805175606+08'00'" creationdate="D:20220805175606+08'00'" coords="82.6839,85.72450000000003,374.193,85.72450000000003,82.6839,74.09649999999999,374.193,74.09649999999999,83.20589999999994,70.68550000000005,376.69589999999994,70.68550000000005,83.20589999999994,60.84850000000006,376.69589999999994,60.84850000000006"><contents>根据应用种类不同，客户端和服务器哪一方先执行 close 都有可能。有些
应用中是客户端先执行 close，而另外一些应用中则是服务器先执行 close。</contents></highlight><highlight page="82" rect="53.858,148.656,201.263,176.836" color="#FFCD45" flags="print" name="77eb0a7d-3495-33bf-6b27-977c36fa1abc" title="Guest" subject="高亮" date="D:20220805180004+08'00'" creationdate="D:20220805180004+08'00'" coords="80.8583,176.83595000000003,201.26299999999998,176.83595000000003,80.8583,165.65660000000003,201.26299999999998,165.65660000000003,53.8583,159.50465000000003,112.48429999999999,159.50465000000003,53.8583,148.65605000000005,112.48429999999999,148.65605000000005"><contents>地址解析协议（Address Resolution
Protocol，ARP）</contents></highlight><highlight page="82" rect="215.426,318.652,362.828,346.832" color="#FFCD45" flags="print" name="f801614e-57ce-5645-1a9a-0edd66b04722" title="Guest" subject="高亮" date="D:20220805180010+08'00'" creationdate="D:20220805180010+08'00'" coords="272.18929999999995,346.83200000000005,362.82829999999996,346.83200000000005,272.18929999999995,335.65265000000005,362.82829999999996,335.65265000000005,215.42629999999997,329.50070000000005,334.2982999999999,329.50070000000005,215.42629999999997,318.6521,334.2982999999999,318.6521"><contents>ARP 是根据已知 IP 地
址求出MAC地址这个答案，</contents></highlight><highlight page="31" rect="82.369,144.802,276.085,156.430" color="#FFCD45" flags="print" name="979fb425-006d-dc46-799d-b297dfa0d8f6" title="Guest" subject="高亮" date="D:20220805214550+08'00'" creationdate="D:20220805214550+08'00'" coords="82.3688,156.4302,276.0848,156.4302,82.3688,144.80220000000003,276.0848,144.80220000000003"><contents>URL：Uniform Resource Locator，统一资源定位符</contents></highlight><highlight page="31" rect="82.315,89.560,374.162,114.436" color="#FFCD45" flags="print" name="26fb9cf9-21f2-5705-3101-d0caea16156c" title="Guest" subject="高亮" date="D:20220805214607+08'00'" creationdate="D:20220805214607+08'00'" coords="82.31479999999992,114.43619999999999,374.1622999999999,114.43619999999999,82.31479999999992,102.8082,374.1622999999999,102.8082,83.18779999999992,99.3972,327.95179999999993,99.3972,83.18779999999992,89.56020000000001,327.95179999999993,89.56020000000001"><contents>FTP：File Transfer Protocol，文件传送协议。这是一种在上传、下载文件
时使用的协议。使用 FTP 协议来传送文件的程序也被叫作 FTP</contents></highlight><highlight page="37" rect="82.387,144.805,288.100,156.433" color="#FFCD45" flags="print" name="b5ff9d87-19ec-79b6-a560-b451108bf346" title="Guest" subject="高亮" date="D:20220805215801+08'00'" creationdate="D:20220805215801+08'00'" coords="82.3868,156.4332,288.0998,156.4332,82.3868,144.8052,288.0998,144.8052"><contents>URI：Uniform Resource Identifier，统一资源标识符。</contents></highlight><highlight page="87" rect="106.939,72.160,198.594,81.160" color="#FFCD45" flags="print" name="1dd0ebfd-12d3-11ea-7ec5-22a5bb17452e" title="Guest" subject="高亮" date="D:20220806104734+08'00'" creationdate="D:20220806104734+08'00'" coords="106.93910000000001,81.15980000000002,198.5935,81.15980000000002,106.93910000000001,72.15980000000002,198.5935,72.15980000000002"><contents>TCP/IP 软件采用分层结构</contents></highlight><highlight page="88" rect="82.130,148.860,293.391,176.581" color="#FFCD45" flags="print" name="3aef44df-71ef-b986-9a3d-539d85b1469a" title="Guest" subject="高亮" date="D:20220806105020+08'00'" creationdate="D:20220806105020+08'00'" coords="82.13029999999988,176.5808750000001,293.3912999999999,176.5808750000001,82.13029999999988,165.3590000000001,293.3912999999999,165.3590000000001,82.13029999999988,160.08222500000005,269.3144999999999,160.08222500000005,82.13029999999988,148.86035000000004,269.3144999999999,148.86035000000004"><contents>浏览器、邮件等一般应用程序收发数据时用TCP；
DNS查询等收发较短的控制数据时用UDP。</contents></highlight><highlight page="88" rect="71.174,61.557,362.828,86.433" color="#FFCD45" flags="print" name="fc8437b8-ec54-e62c-ae09-3cb534758101" title="Guest" subject="高亮" date="D:20220806105058+08'00'" creationdate="D:20220806105058+08'00'" coords="71.1743,86.43320000000006,362.8282999999999,86.43320000000006,71.1743,74.80520000000001,362.8282999999999,74.80520000000001,71.8583,71.39419999999996,161.85829999999999,71.39419999999996,71.8583,61.557199999999966,161.85829999999999,61.557199999999966"><contents>网络包：网络中的数据会被切分成几十字节到几千字节的小块，每一个小
数据块被称为一个包。</contents></highlight><highlight page="89" rect="65.191,487.741,378.919,534.534" color="#FFCD45" flags="print" name="779c0f6b-bd80-305c-af11-421b5de3caf3" title="Guest" subject="高亮" date="D:20220806105146+08'00'" creationdate="D:20220806105146+08'00'" coords="207.51639999999998,534.533948046875,378.91949999999997,534.533948046875,207.51639999999998,521.735725,378.91949999999997,521.735725,65.19149999999996,516.1896250000001,374.16949999999997,516.1896250000001,65.19149999999996,504.73832500000003,374.16949999999997,504.73832500000003,65.19150000000002,500.454540625,264.1443,500.454540625,65.19150000000002,487.74092500000006,264.1443,487.74092500000006"><contents>IP 中还包括 ICMPA 协议和 ARPB 协议。
ICMP 用于告知网络包传送过程中产生的错误以及各种控制消息，ARP 用
于根据 IP 地址查询相应的以太网MAC地址 C。</contents></highlight><highlight page="89" rect="82.279,103.567,374.159,128.443" color="#FFCD45" flags="print" name="dc6eca72-f9df-2aaf-8188-96ef0972e48c" title="Guest" subject="高亮" date="D:20220806105204+08'00'" creationdate="D:20220806105204+08'00'" coords="82.27890000000001,128.44320000000005,374.15880000000027,128.44320000000005,82.27890000000001,116.8152,374.15880000000027,116.8152,83.17890000000001,113.4042,171.1809,113.4042,83.17890000000001,103.56720000000001,171.1809,103.56720000000001"><contents>MAC地址：符合 IEEE 规格的局域网设备都使用同一格式的地址，这种地
址被称为MAC地址。</contents></highlight><highlight page="90" rect="82.197,437.317,291.197,448.539" color="#FFCD45" flags="print" name="882b1ca8-b833-1567-2183-784f1b283887" title="Guest" subject="高亮" date="D:20220806105511+08'00'" creationdate="D:20220806105511+08'00'" coords="82.19680000000002,448.5392750000001,291.19680000000005,448.5392750000001,82.19680000000002,437.31740000000013,291.19680000000005,437.31740000000013"><contents>协议栈是根据套接字中记录的控制信息来工作的。</contents></highlight><highlight page="90" rect="71.067,61.555,367.329,100.435" color="#FFCD45" flags="print" name="bbde7135-4456-0019-4817-e8ccd298d744" title="Guest" subject="高亮" date="D:20220806105934+08'00'" creationdate="D:20220806105934+08'00'" coords="71.06720000000001,100.43520000000001,367.3292,100.43520000000001,71.06720000000001,88.80719999999997,367.3292,88.80719999999997,71.84930000000003,85.39620000000002,362.7923000000001,85.39620000000002,71.84930000000003,75.55920000000003,362.7923000000001,75.55920000000003,71.84930000000001,71.3922,350.3093,71.3922,71.84930000000001,61.55520000000001,350.3093,61.55520000000001"><contents>对于处于等待连接状态的套接字，也可以绑定 IP 地址，如果绑定了 IP地址，
那么除绑定的 IP 地址之外，对其他地址进行连接操作都会出错。当服务器
上安装有多块网卡时，可以用这种方式来限制只能连接到特定的网卡。</contents></highlight><highlight page="90" rect="53.853,200.251,362.860,245.698" color="#FFCD45" flags="print" name="82fce6c2-2963-2c2e-51be-c622b8302562" title="Guest" subject="高亮" date="D:20220806105940+08'00'" creationdate="D:20220806105940+08'00'" coords="333.97030000000007,245.69752499999993,362.8313,245.69752499999993,333.97030000000007,234.24622499999998,362.8313,234.24622499999998,53.85330000000003,228.70012499999996,362.85980000000006,228.70012499999996,53.85330000000003,217.24882499999995,362.85980000000006,217.24882499999995,53.872300000000095,212.954540625,89.71470000000001,212.954540625,53.872300000000095,200.25142499999993,89.71470000000001,200.25142499999993"><contents>，其中
本地 IP 地址和远程 IP 地址都是 0.0.0.0，这表示通信还没开始，IP 地址不
确定 C。</contents></highlight><highlight page="91" rect="135.646,183.439,341.495,198.305" color="#FFCD45" flags="print" name="26cf4a94-aabe-887b-8bec-5b79599f7ccd" title="Guest" subject="高亮" date="D:20220806110038+08'00'" creationdate="D:20220806110038+08'00'" coords="234.79739999999998,198.30499999999995,341.4949,198.30499999999995,234.79739999999998,190.94049999999993,341.4949,190.94049999999993,135.6464,190.80399999999997,216.1619,190.80399999999997,135.6464,183.43949999999995,216.1619,183.43949999999995"><contents>
���</contents></highlight><highlight page="93" rect="106.707,173.168,154.707,182.168" color="#FFCD45" flags="print" name="662de2dd-f609-c03a-dd86-1653d83b10f9" title="Guest" subject="高亮" date="D:20220806110326+08'00'" creationdate="D:20220806110326+08'00'" coords="106.70710000000001,182.16809999999998,154.70710000000003,182.16809999999998,106.70710000000001,173.16809999999998,154.70710000000003,173.16809999999998"><contents>消息收发操作</contents></highlight><highlight page="93" rect="93.543,109.068,360.018,136.788" color="#FFCD45" flags="print" name="9656b9f1-92c3-5ac8-2fbb-fa5e4cbff3ec" title="Guest" subject="高亮" date="D:20220806110439+08'00'" creationdate="D:20220806110439+08'00'" coords="93.5433,136.78825,360.01829999999995,136.78825,93.5433,125.566375,360.01829999999995,125.566375,93.5433,120.28960000000001,169.5433,120.28960000000001,93.5433,109.067725,169.5433,109.067725"><contents>创建套接字时，首先分配一个套接字所需的内存空间，然后向其
中写入初始状态。</contents></highlight><highlight page="95" rect="65.207,402.751,378.935,431.200" color="#FFCD45" flags="print" name="e96deefc-4fbd-d297-93f8-60e9ce838b81" title="Guest" subject="高亮" date="D:20220806110838+08'00'" creationdate="D:20220806110838+08'00'" coords="210.88019999999983,431.200025,378.93519999999984,431.200025,210.88019999999983,419.748725,378.93519999999984,419.748725,65.20719999999983,414.20262499999995,169.70719999999983,414.20262499999995,65.20719999999983,402.75132499999995,169.70719999999983,402.75132499999995"><contents>客户端向服务器传达开始通信的请求，
也是连接操作的目的之一</contents></highlight><highlight page="94" rect="101.482,82.570,362.808,94.021" color="#FFCD45" flags="print" name="01cababf-0dd6-781a-6418-c17ca4129409" title="Guest" subject="高亮" date="D:20220806110903+08'00'" creationdate="D:20220806110903+08'00'" coords="101.4817999999999,94.02142499999991,362.8077999999999,94.02142499999991,101.4817999999999,82.57012499999996,362.8077999999999,82.57012499999996"><contents>我们需要把服务器的 IP 地址和端口号等信息告知协议栈，这是</contents></highlight><highlight page="95" rect="65.197,521.736,160.197,533.187" color="#FFCD45" flags="print" name="710fa887-7ca6-9c73-1ad4-2a443e15947c" title="Guest" subject="高亮" date="D:20220806110907+08'00'" creationdate="D:20220806110907+08'00'" coords="65.1969,533.1871250000002,160.1969,533.1871250000002,65.1969,521.7358250000001,160.1969,521.7358250000001"><contents>连接操作的目的之一。</contents></highlight><highlight page="94" rect="53.849,116.565,362.827,145.014" color="#FFCD45" flags="print" name="47ffda3e-b6e7-ea3e-dec3-9d9c385173c3" title="Guest" subject="高亮" date="D:20220806110913+08'00'" creationdate="D:20220806110913+08'00'" coords="158.81429999999997,145.01362499999993,362.82679999999993,145.01362499999993,158.81429999999997,133.562325,362.82679999999993,133.562325,53.84879999999994,128.01622499999996,210.70329999999993,128.01622499999996,53.84879999999994,116.5649249999999,210.70329999999993,116.5649249999999"><contents>浏览器可以根据网址来查询服务器的 IP 地址，而
且根据规则也知道应该使用 80 号端口</contents></highlight><highlight page="95" rect="65.207,232.777,374.214,278.223" color="#FFCD45" flags="print" name="cbfd5a87-d053-3628-ac88-4b1de8727cac" title="Guest" subject="高亮" date="D:20220806111021+08'00'" creationdate="D:20220806111021+08'00'" coords="248.54769999999985,278.2234249999999,374.21369999999985,278.2234249999999,248.54769999999985,266.7721249999999,374.21369999999985,266.7721249999999,65.20719999999989,261.22602499999994,374.18519999999984,261.22602499999994,65.20719999999989,249.77472499999988,374.18519999999984,249.77472499999988,65.21669999999978,245.454540625,131.7166999999998,245.454540625,65.21669999999978,232.7773249999999,131.7166999999998,232.7773249999999"><contents>我们还需要一块用来临时存放
要收发的数据的内存空间，这块内存空间称为缓冲区，它也是在连接操作
的过程中分配的</contents></highlight><highlight page="97" rect="97.930,522.872,154.072,533.503" color="#FFCD45" flags="print" name="39e4479b-4482-8d46-883d-b3007b787c27" title="Guest" subject="高亮" date="D:20220806112026+08'00'" creationdate="D:20220806112026+08'00'" coords="97.9299,533.5033999999999,154.0719,533.5033999999999,97.9299,522.87215,154.0719,522.87215"><contents>TCP头部格式</contents></highlight><highlight page="97" rect="202.680,313.228,218.177,322.292" color="#FFCD45" flags="print" name="5d1ad65a-8fab-d44f-c874-f5e06c4c5c46" title="Guest" subject="高亮" date="D:20220806112231+08'00'" creationdate="D:20220806112231+08'00'" coords="202.68009999999995,322.2922,218.1769,322.2922,202.68009999999995,313.2282,218.1769,313.2282"><contents>ACK</contents></highlight><highlight page="97" rect="202.680,263.244,218.182,272.308" color="#FFCD45" flags="print" name="70200803-9a68-7dd8-4eb6-425d63901822" title="Guest" subject="高亮" date="D:20220806112244+08'00'" creationdate="D:20220806112244+08'00'" coords="202.68009999999995,272.30819999999994,218.18169999999998,272.30819999999994,202.68009999999995,263.2442,218.18169999999998,263.2442"><contents>SYN</contents></highlight><highlight page="97" rect="202.680,238.252,215.088,247.316" color="#FFCD45" flags="print" name="3a02dff1-4bb4-bfc0-4a28-367ba3f0f3c2" title="Guest" subject="高亮" date="D:20220806112247+08'00'" creationdate="D:20220806112247+08'00'" coords="202.68009999999995,247.31619999999992,215.08809999999997,247.31619999999992,202.68009999999995,238.2521999999999,215.08809999999997,238.2521999999999"><contents>FIN</contents></highlight><highlight page="98" rect="95.368,223.483,223.368,232.483" color="#FFCD45" flags="print" name="a345194e-475d-7230-5c5e-4f2c112e3ba5" title="Guest" subject="高亮" date="D:20220806112443+08'00'" creationdate="D:20220806112443+08'00'" coords="95.3685,232.48299999999995,223.36849999999998,232.48299999999995,95.3685,223.48299999999995,223.36849999999998,223.48299999999995"><contents>客户端与服务器之间交换的控制信息</contents></highlight><highlight page="99" rect="88.795,370.325,294.296,414.544" color="#FFCD45" flags="print" name="83b7a604-8fe9-58ef-d5a5-6422042edf95" title="Guest" subject="高亮" date="D:20220806112727+08'00'" creationdate="D:20220806112727+08'00'" coords="93.54489999999983,414.5444750000001,255.0448999999998,414.5444750000001,93.54489999999983,403.3226000000001,255.0448999999998,403.3226000000001,88.79489999999983,398.0458250000001,185.04604999999984,398.0458250000001,88.79489999999983,386.8239500000001,185.04604999999984,386.8239500000001,88.79489999999983,381.5471750000001,294.2960499999998,381.5471750000001,88.79489999999983,370.3253000000001,294.2960499999998,370.3253000000001"><contents>通信操作中使用的控制信息分为两类。
（1） 头部中记录的信息
（2） 套接字（协议栈中的内存空间）中记录的信息</contents></highlight><highlight page="102" rect="53.851,300.738,362.867,397.208" color="#FFCD45" flags="print" name="9731f61f-baee-1e0a-e307-8b36bcc9895d" title="Guest" subject="高亮" date="D:20220829152606+08'00'" creationdate="D:20220829152606+08'00'" coords="72.8677999999999,397.2079250000001,362.8647999999998,397.2079250000001,72.8677999999999,385.7566250000001,362.8647999999998,385.7566250000001,53.86779999999991,381.534048046875,362.8316,381.534048046875,53.86779999999991,368.7592250000001,362.8316,368.7592250000001,53.85360000000001,364.454540625,362.81910000000005,364.454540625,53.85360000000001,351.73842499999995,362.81910000000005,351.73842499999995,53.850599999999986,346.18972499999995,362.8666,346.18972499999995,53.850599999999986,334.73842499999995,362.8666,334.73842499999995,53.86009999999996,330.454540625,362.8347,330.454540625,53.86009999999996,317.741025,362.8347,317.741025,53.85670000000002,312.18972499999995,305.6162,312.18972499999995,53.85670000000002,300.73842499999995,305.6162,300.73842499999995"><contents>第一个判断要素是每个网络包能容纳的数据长度，协议栈会根据一个
叫作MTUA 的参数来进行判断。MTU表示一个网络包的最大长度，在以太
网中一般是 1500 字节（图 2.5）B。MTU是包含头部的总长度，因此需要从
MTU减去头部的长度，然后得到的长度就是一个网络包中所能容纳的最大
数据长度，这一长度叫作MSSC。当从应用程序收到的数据长度超过或者接
近MSS时再发送出去，就可以避免发送大量小包的问题了。</contents></highlight><highlight page="102" rect="71.048,158.805,275.816,170.433" color="#FFCD45" flags="print" name="ee0642a8-b028-c7d8-0837-6013cd2868a2" title="Guest" subject="高亮" date="D:20220829152657+08'00'" creationdate="D:20220829152657+08'00'" coords="71.0483,170.4332,275.8163,170.4332,71.0483,158.8052,275.8163,158.8052"><contents>MTU：Maximum Transmission Unit，最大传输单元。</contents></highlight><highlight page="102" rect="67.331,61.551,367.315,128.439" color="#FFCD45" flags="print" name="5b31ed63-879c-8bdd-d133-c127b3bd7c47" title="Guest" subject="高亮" date="D:20220829152742+08'00'" creationdate="D:20220829152742+08'00'" coords="70.9403,128.43920000000003,362.81929999999994,128.43920000000003,70.9403,116.81119999999999,362.81929999999994,116.81119999999999,71.84029999999994,113.40020000000004,367.3148000000001,113.40020000000004,71.84029999999994,103.5632,367.3148000000001,103.5632,71.84029999999994,99.39620000000002,362.80129999999997,99.39620000000002,71.84029999999994,89.55920000000003,362.80129999999997,89.55920000000003,67.33129999999994,85.3922,362.8102999999998,85.3922,67.33129999999994,75.55520000000001,362.8102999999998,75.55520000000001,71.8312999999999,71.38819999999998,188.83129999999989,71.38819999999998,71.8312999999999,61.551199999999994,188.83129999999989,61.551199999999994"><contents>MSS：Maximum Segment Size，最大分段大小。 TCP 和 IP 的头部加起来一
般是 40 字节，因此 MTU 减去这个长度就是 MSS。例如，在以太网中，
MTU 为 1500，因此 MSS 就是 1460。TCP/IP 可以使用一些可选参数
（protocol option），如加密等，这时头部的长度会增加，那么 MSS 就会随
着头部长度增加而相应缩短。</contents></highlight><highlight page="103" rect="65.187,487.741,378.915,533.187" color="#FFCD45" flags="print" name="954a0374-5df4-f419-45a9-b1ed1b666620" title="Guest" subject="高亮" date="D:20220829152814+08'00'" creationdate="D:20220829152814+08'00'" coords="151.3809,533.1871250000002,374.1559000000001,533.1871250000002,151.3809,521.7358250000001,374.1559000000001,521.7358250000001,65.18739999999998,516.1897250000002,378.9154,516.1897250000002,65.18739999999998,504.7384250000001,378.9154,504.7384250000001,65.18739999999995,500.534048046875,167.611935,500.534048046875,65.18739999999995,487.74102500000015,167.611935,487.74102500000015"><contents>，即便缓冲区中的数据长度没有达到 MSS，也应该果
断发送出去。为此，协议栈的内部有一个计时器，当经过一定时间之后，
就会把网络包发送出去 A</contents></highlight><highlight page="103" rect="65.181,266.770,374.225,363.208" color="#FFCD45" flags="print" name="c22492a8-9e76-0f31-67b1-6b9e754964d0" title="Guest" subject="高亮" date="D:20220829152942+08'00'" creationdate="D:20220829152942+08'00'" coords="151.75449999999995,363.20792499999993,374.2254999999999,363.20792499999993,151.75449999999995,351.75662499999993,374.2254999999999,351.75662499999993,65.19049999999994,346.2105249999999,374.159,346.2105249999999,65.19049999999994,334.7592249999999,374.159,334.7592249999999,65.18099999999995,329.2131249999999,374.11150000000004,329.2131249999999,65.18099999999995,317.76182499999993,374.11150000000004,317.76182499999993,65.18099999999995,312.2157249999999,374.1875,312.2157249999999,65.18099999999995,300.7644249999999,374.1875,300.7644249999999,65.19049999999991,295.21832499999994,374.16849999999994,295.21832499999994,65.19049999999991,283.7670249999999,374.16849999999994,283.7670249999999,65.19049999999993,278.22092499999985,198.19049999999993,278.22092499999985,65.19049999999993,266.7696249999999,198.19049999999993,266.7696249999999"><contents>如果仅靠协议栈来判断发送的时机可能会带来一些问
题，因此协议栈也给应用程序保留了控制发送时机的余地。应用程序在发
送数据时可以指定一些选项，比如如果指定“不等待填满缓冲区直接发
送”，则协议栈就会按照要求直接发送数据。像浏览器这种会话型的应用程
序在向服务器发送数据时，等待填满缓冲区导致延迟会产生很大影响，因
此一般会使用直接发送的选项。</contents></highlight><highlight page="103" rect="106.707,118.019,153.172,127.019" color="#FFCD45" flags="print" name="e4658744-9fa6-98a3-e173-5e9f7d0a2d81" title="Guest" subject="高亮" date="D:20220829152948+08'00'" creationdate="D:20220829152948+08'00'" coords="106.70710000000001,127.01850000000002,153.1719,127.01850000000002,106.70710000000001,118.01850000000002,153.1719,118.01850000000002"><contents>MTU与MSS</contents></highlight><highlight page="103" rect="82.369,74.810,256.600,86.438" color="#FFCD45" flags="print" name="6e215e67-9d34-21d6-2e76-40c4df777b3a" title="Guest" subject="高亮" date="D:20220829153012+08'00'" creationdate="D:20220829153012+08'00'" coords="82.3688,86.43820000000005,256.5998,86.43820000000005,82.3688,74.81020000000001,256.5998,74.81020000000001"><contents>起始帧分界符：Start Frame Delimiter，SFD。</contents></highlight><highlight page="103" rect="82.279,60.815,253.009,72.443" color="#FFCD45" flags="print" name="26d5bf60-6bdd-de08-6b43-7e0afa2946ef" title="Guest" subject="高亮" date="D:20220829153018+08'00'" creationdate="D:20220829153018+08'00'" coords="82.27879999999999,72.44320000000005,253.00879999999998,72.44320000000005,82.27879999999999,60.815200000000004,253.00879999999998,60.815200000000004"><contents>FCS：Frame Check Sequence，帧校验序列。</contents></highlight><highlight page="104" rect="95.368,110.345,183.368,119.345" color="#FFCD45" flags="print" name="5fdbc94b-b011-ce5c-d19c-1485de04990b" title="Guest" subject="高亮" date="D:20220829153153+08'00'" creationdate="D:20220829153153+08'00'" coords="95.3685,119.34530000000001,183.36849999999998,119.34530000000001,95.3685,110.34530000000001,183.36849999999998,110.34530000000001"><contents>应用程序数据的拆分发送</contents></highlight><highlight page="105" rect="83.197,61.553,374.185,100.433" color="#FFCD45" flags="print" name="026001cc-9edc-8c14-4cb3-d46d7080b12d" title="Guest" subject="高亮" date="D:20220829153608+08'00'" creationdate="D:20220829153608+08'00'" coords="83.2869,100.4332,374.1849000000001,100.4332,83.2869,88.80520000000001,374.1849000000001,88.80520000000001,83.1969,85.39419999999996,374.1129000000001,85.39419999999996,83.1969,75.55719999999997,374.1129000000001,75.55719999999997,83.19690000000001,71.39020000000005,196.6959,71.39020000000005,83.19690000000001,61.55320000000006,196.6959,61.55320000000006"><contents>返回 ACK 号时，除了要设置 ACK号的值以外，还需要将控制位中的
ACK比特设为 1，这代表ACK号字段有效，接收方也就可以知道这个网
络包是用来告知ACK号的。</contents></highlight><highlight page="105" rect="65.197,231.342,378.925,327.780" color="#FFCD45" flags="print" name="6ce9b460-2595-d276-06fc-c7432a2d8d85" title="Guest" subject="高亮" date="D:20220829153626+08'00'" creationdate="D:20220829153626+08'00'" coords="340.1838999999999,327.780025,378.92489999999987,327.780025,340.1838999999999,316.32872499999996,378.92489999999987,316.32872499999996,65.19689999999986,310.782625,374.18439999999987,310.782625,65.19689999999986,299.331325,374.18439999999987,299.331325,65.20639999999985,293.78522499999997,374.2033999999999,293.78522499999997,65.20639999999985,282.333925,374.2033999999999,282.333925,65.21589999999986,276.787825,374.24139999999966,276.787825,65.21589999999986,265.33652499999994,374.24139999999966,265.33652499999994,65.21589999999983,259.79042499999997,374.18439999999987,259.79042499999997,65.21589999999983,248.33912499999997,374.18439999999987,248.33912499999997,65.2063999999998,244.101048046875,211.9331,244.101048046875,65.2063999999998,231.34172499999994,211.9331,231.34172499999994"><contents>。例如，
假设上次接收到第 1460 字节，那么接下来如果收到序号为 1461 的包，说
明中间没有遗漏；但如果收到的包序号为 2921，那就说明中间有包遗漏
了。像这样，如果确认没有遗漏，接收方会将到目前为止接收到的数据长
度加起来，计算出一共已经收到了多少个字节，然后将这个数值写入 TCP
头部的ACK号中发送给发送方 A。</contents></highlight><highlight page="105" rect="60.475,197.308,378.953,244.101" color="#FFCD45" flags="print" name="9b70e82f-be42-04b7-9d1e-284e9e9e24aa" title="Guest" subject="高亮" date="D:20220829153823+08'00'" creationdate="D:20220829153823+08'00'" coords="259.7086,244.101048046875,374.19784999999996,244.101048046875,259.7086,231.34172499999994,374.19784999999996,231.34172499999994,65.2056,225.75662499999999,378.95259999999996,225.75662499999999,65.2056,214.30532499999998,378.95259999999996,214.30532499999998,60.47459999999998,208.75922499999996,278.5471,208.75922499999996,60.47459999999998,197.30792499999995,278.5471,197.30792499999995"><contents>发送方说的是“现在发送的
是从第××字节开始的部分，一共有××字节哦！”而接收方则回复说，
“到第××字节之前的数据我已经都收到了哦！”</contents></highlight><highlight page="106" rect="95.368,99.822,171.741,108.822" color="#FFCD45" flags="print" name="5195ede4-c7c0-df89-ea42-bc050726c0e6" title="Guest" subject="高亮" date="D:20220829153920+08'00'" creationdate="D:20220829153920+08'00'" coords="95.3685,108.82159999999999,171.7413,108.82159999999999,95.3685,99.82159999999999,171.7413,99.82159999999999"><contents>序号和 ACK号的用法</contents></highlight><highlight page="107" rect="65.206,436.749,374.184,482.195" color="#FFCD45" flags="print" name="a07b63a6-6740-1a8a-bda0-c77195628d5d" title="Guest" subject="高亮" date="D:20220829153955+08'00'" creationdate="D:20220829153955+08'00'" coords="354.9279,482.1949250000001,374.1844,482.1949250000001,354.9279,470.7436250000001,374.1844,470.7436250000001,65.20639999999997,465.1975250000001,374.1844,465.1975250000001,65.20639999999997,453.7462250000001,374.1844,453.7462250000001,65.20639999999995,449.534048046875,177.10999999999999,449.534048046875,65.20639999999995,436.7488250000001,177.10999999999999,436.7488250000001"><contents>。实
际上，在将SYN 设为 1 的同时，还需要同时设置序号字段的值，而这里的
值就代表序号的初始值 A。</contents></highlight><highlight page="107" rect="78.688,61.545,374.167,113.394" color="#FFCD45" flags="print" name="a30a50cd-3871-2439-0ed4-dbaf0d8674f3" title="Guest" subject="高亮" date="D:20220829154212+08'00'" creationdate="D:20220829154212+08'00'" coords="83.1969,113.39420000000001,374.16599999999994,113.39420000000001,83.1969,103.55720000000002,374.16599999999994,103.55720000000002,83.1969,99.39020000000005,374.16690000000006,99.39020000000005,83.1969,89.55320000000006,374.16690000000006,89.55320000000006,78.68789999999998,85.38620000000003,374.1633000000003,85.38620000000003,78.68789999999998,75.54920000000004,374.1633000000003,75.54920000000004,83.18789999999998,71.38220000000001,294.6879,71.38220000000001,83.18789999999998,61.54520000000002,294.6879,61.54520000000002"><contents>SYN 设为 1 并告知初始序号这一操作仅在连接过程中出现，因此发送
SYN 为 1 的网络包就表示发起连接的意思。实际上，SYN 是 Synchronize
（同步）的缩写，意思是通过告知初始序号使通信双方保持步调一致，以便
完成后续的数据收发检查，这才是SYN原本的含义。</contents></highlight><highlight page="108" rect="95.368,65.487,171.741,74.487" color="#FFCD45" flags="print" name="42a77411-7d8b-c115-473f-de1fb2af4e52" title="Guest" subject="高亮" date="D:20220829154323+08'00'" creationdate="D:20220829154323+08'00'" coords="95.3685,74.48699999999997,171.7413,74.48699999999997,95.3685,65.48699999999997,171.7413,65.48699999999997"><contents>序号和 ACK号的交互</contents></highlight><highlight page="109" rect="65.197,198.785,374.175,244.231" color="#FFCD45" flags="print" name="fc8152d1-4ff0-f1be-9ee5-dd556973642e" title="Guest" subject="高亮" date="D:20220829155515+08'00'" creationdate="D:20220829155515+08'00'" coords="181.0398999999999,244.23132500000003,374.16539999999986,244.23132500000003,181.0398999999999,232.78002500000002,374.16539999999986,232.78002500000002,65.19689999999986,227.233925,374.17489999999987,227.233925,65.19689999999986,215.782625,374.17489999999987,215.782625,65.19689999999983,210.23652500000003,371.9898999999998,210.23652500000003,65.19689999999983,198.78522500000008,371.9898999999998,198.78522500000008"><contents>如果发生网络中断、服务器宕机等问题，那么
无论 TCP 怎样重传都不管用。这种情况下，无论如何尝试都是徒劳，因
此 TCP 会在尝试几次重传无效之后强制结束通信，并向应用程序报错。</contents></highlight><highlight page="110" rect="53.820,215.775,362.798,295.216" color="#FFCD45" flags="print" name="d9b32d3d-ee7a-03ce-1e56-f14c00e87eea" title="Guest" subject="高亮" date="D:20220829155802+08'00'" creationdate="D:20220829155802+08'00'" coords="123.29379999999989,295.2157249999999,362.7792999999999,295.2157249999999,123.29379999999989,283.7644249999999,362.7792999999999,283.7644249999999,53.82029999999989,278.21832499999994,362.79829999999987,278.21832499999994,53.82029999999989,266.7670249999999,362.79829999999987,266.7670249999999,53.82029999999989,261.22092499999985,362.79829999999987,261.22092499999985,53.82029999999989,249.7696249999999,362.79829999999987,249.7696249999999,53.82029999999989,244.22352499999988,362.7792999999999,244.22352499999988,53.82029999999989,232.77222499999988,362.7792999999999,232.77222499999988,53.82029999999989,228.454540625,89.7634,228.454540625,53.82029999999989,215.77482499999985,89.7634,215.77482499999985"><contents>TCP 采用了动态调整等待时间的方法，这个等待时间是
根据 ACK 号返回所需的时间来判断的。具体来说，TCP 会在发送数据
的过程中持续测量 ACK 号的返回时间，如果 ACK 号返回变慢，则相应
延长等待时间；相对地，如果 ACK 号马上就能返回，则相应缩短等待
时间 B。</contents></highlight><highlight page="110" rect="53.830,317.759,362.836,363.205" color="#FFCD45" flags="print" name="b857363d-7c02-471b-847f-782c2782780c" title="Guest" subject="高亮" date="D:20220829155808+08'00'" creationdate="D:20220829155808+08'00'" coords="285.5728,363.2053249999999,362.8363,363.2053249999999,285.5728,351.75402499999996,362.8363,351.75402499999996,53.83929999999995,346.20792499999993,362.7982999999999,346.20792499999993,53.83929999999995,334.75662499999993,362.7982999999999,334.75662499999993,53.82979999999992,329.2105249999999,240.13429999999994,329.2105249999999,53.82979999999992,317.7592249999999,240.13429999999994,317.7592249999999"><contents>在公司里的局域网
环境下，几毫秒就可以返回 ACK号，但在互联网环境中，当遇到拥塞时
需要几百毫秒才能返回ACK号也并不稀奇。</contents></highlight><highlight page="111" rect="111.147,214.373,215.147,223.373" color="#FFCD45" flags="print" name="11f09cfb-4f30-238b-2149-c04b44759382" title="Guest" subject="高亮" date="D:20220829160020+08'00'" creationdate="D:20220829160020+08'00'" coords="111.14710000000001,223.37279999999998,215.14710000000002,223.37279999999998,111.14710000000001,214.37279999999998,215.14710000000002,214.37279999999998"><contents>一来一回方式和滑动窗口方式</contents></highlight><highlight page="111" rect="65.197,62.309,374.203,107.755" color="#FFCD45" flags="print" name="f211fdec-f293-498e-5e50-84eac00bb4c6" title="Guest" subject="高亮" date="D:20220829160147+08'00'" creationdate="D:20220829160147+08'00'" coords="179.87130000000008,107.75522499999994,374.2033,107.75522499999994,179.87130000000008,96.30392499999994,374.2033,96.30392499999994,65.20630000000008,90.75782499999991,374.1558,90.75782499999991,65.20630000000008,79.30652499999997,374.1558,79.30652499999997,65.19680000000007,73.76042499999994,374.1681500000003,73.76042499999994,65.19680000000007,62.309124999999995,374.1681500000003,62.309124999999995"><contents>当接收方的 TCP 收到包后，会先将数据存放到
接收缓冲区中。然后，接收方需要计算 ACK号，将数据块组装起来还原
成原本的数据并传递给应用程序，如果这些操作还没完成下一个包就到了</contents></highlight><highlight page="112" rect="53.849,402.754,367.586,533.187" color="#FFCD45" flags="print" name="da59c4a6-80cd-7180-31be-eba01a989c95" title="Guest" subject="高亮" date="D:20220829160227+08'00'" creationdate="D:20220829160227+08'00'" coords="53.8583,533.1871250000002,362.8268000000001,533.1871250000002,53.8583,521.7358250000001,362.8268000000001,521.7358250000001,53.858300000000035,516.1897250000002,362.82870000000014,516.1897250000002,53.858300000000035,504.7384250000001,362.82870000000014,504.7384250000001,53.848800000000054,499.19232500000015,362.85529999999994,499.19232500000015,53.848800000000054,487.74102500000015,362.85529999999994,487.74102500000015,53.858300000000035,482.1949250000001,362.8268000000001,482.1949250000001,53.858300000000035,470.7436250000001,362.8268000000001,470.7436250000001,53.8583,465.1975250000001,362.8268000000001,465.1975250000001,53.8583,453.7462250000001,362.8268000000001,453.7462250000001,53.858300000000035,448.2001250000001,367.5863,448.2001250000001,53.858300000000035,436.7488250000001,367.5863,436.7488250000001,53.8583,431.2027250000001,362.8277500000001,431.2027250000001,53.8583,419.7514250000001,362.8277500000001,419.7514250000001,53.84879999999999,414.2053250000001,101.34879999999998,414.2053250000001,53.84879999999999,402.75402500000007,101.34879999999998,402.75402500000007"><contents>也不用担心，因为下一个包也会被暂存在接收缓冲区中。如果数据到达的
速率比处理这些数据并传递给应用程序的速率还要快，那么接收缓冲区中
的数据就会越堆越多，最后就会溢出。缓冲区溢出之后，后面的数据就进
不来了，因此接收方就收不到后面的包了，这就和中途出错的结果是一样
的，也就意味着超出了接收方处理能力。我们可以通过下面的方法来避免
这种情况的发生。首先，接收方需要告诉发送方自己最多能接收多少数据，
然后发送方根据这个值对数据发送操作进行控制，这就是滑动窗口方式的
基本思路。</contents></highlight><highlight page="114" rect="53.849,419.751,362.865,533.187" color="#FFCD45" flags="print" name="7f81b1d9-1020-a251-fcd4-9cf386bb6278" title="Guest" subject="高亮" date="D:20220829161025+08'00'" creationdate="D:20220829161025+08'00'" coords="92.37129999999999,533.1871250000002,362.8268000000001,533.1871250000002,92.37129999999999,521.7358250000001,362.8268000000001,521.7358250000001,53.8583,516.1897250000002,362.86479999999983,516.1897250000002,53.8583,504.7384250000001,362.86479999999983,504.7384250000001,53.8583,499.19232500000015,362.8173000000001,499.19232500000015,53.8583,487.74102500000015,362.8173000000001,487.74102500000015,53.8583,482.1949250000001,362.8268,482.1949250000001,53.8583,470.7436250000001,362.8268,470.7436250000001,53.848800000000026,465.1975250000001,362.8220500000002,465.1975250000001,53.848800000000026,453.7462250000001,362.8220500000002,453.7462250000001,53.84879999999999,448.2001250000001,362.8362999999999,448.2001250000001,53.84879999999999,436.7488250000001,362.8362999999999,436.7488250000001,53.848799999999954,431.2027250000001,139.34879999999995,431.2027250000001,53.848799999999954,419.7514250000001,139.34879999999995,419.7514250000001"><contents>其实没必要每次都向发送方更新窗口大小，因为只要发送方在每
次发送数据时减掉已发送的数据长度就可以自行计算出当前窗口的剩余长
度。因此，更新窗口大小的时机应该是接收方从缓冲区中取出数据传递给
应用程序的时候。这个操作是接收方应用程序发出请求时才会进行的，而
发送方不知道什么时候会进行这样的操作，因此当接收方将数据传递给应
用程序，导致接收缓冲区剩余容量增加时，就需要告知发送方，这就是更
新窗口大小的时机。</contents></highlight><highlight page="114" rect="53.863,181.751,362.841,227.198" color="#FFCD45" flags="print" name="a1d72034-90e6-6aa2-14d3-9c3ca66e5a52" title="Guest" subject="高亮" date="D:20220829161509+08'00'" creationdate="D:20220829161509+08'00'" coords="314.65689999999995,227.19752499999993,362.8409,227.19752499999993,314.65689999999995,215.74622499999998,362.8409,215.74622499999998,53.86289999999997,210.20012499999996,362.82189999999986,210.20012499999996,53.86289999999997,198.74882499999995,362.82189999999986,198.74882499999995,53.86289999999997,193.20272499999993,210.46089999999995,193.20272499999993,53.86289999999997,181.75142499999993,210.46089999999995,181.75142499999993"><contents>在等待发送
ACK号的时候正好需要更新窗口，这时就可以把ACK号和窗口更新放在
一个包里发送，从而减少包的数量。</contents></highlight><highlight page="114" rect="53.844,113.762,362.831,193.203" color="#FFCD45" flags="print" name="89af022a-5d9d-3dfa-7843-46d6f96960c5" title="Guest" subject="高亮" date="D:20220829161517+08'00'" creationdate="D:20220829161517+08'00'" coords="210.81239999999994,193.20272499999993,362.8313999999999,193.20272499999993,210.81239999999994,181.75142499999993,362.8313999999999,181.75142499999993,53.853399999999894,176.2053249999999,362.8313999999999,176.2053249999999,53.853399999999894,164.75402499999996,362.8313999999999,164.75402499999996,53.85339999999992,159.20792499999993,362.82189999999997,159.20792499999993,53.85339999999992,147.75662499999993,362.82189999999997,147.75662499999993,53.84389999999995,142.2105249999999,362.81239999999985,142.2105249999999,53.84389999999995,130.7592249999999,362.81239999999985,130.7592249999999,53.84389999999998,125.21312499999988,82.51490000000001,125.21312499999988,53.84389999999998,113.76182499999993,82.51490000000001,113.76182499999993"><contents>当需要连续发送多个 ACK号时，也
可以减少包的数量，这是因为ACK号表示的是已收到的数据量，也就是
说，它是告诉发送方目前已接收的数据的最后位置在哪里，因此当需要连
续发送ACK号时，只要发送最后一个ACK号就可以了，中间的可以全部
省略。</contents></highlight><highlight page="114" rect="82.686,113.762,362.812,125.213" color="#FFCD45" flags="print" name="01837266-6aa7-3e41-6fab-d1d24cb4730f" title="Guest" subject="高亮" date="D:20220829161536+08'00'" creationdate="D:20220829161536+08'00'" coords="82.68589999999998,125.21312499999988,362.8124,125.21312499999988,82.68589999999998,113.76182499999993,362.8124,113.76182499999993"><contents>当需要连续发送多个窗口更新时也可以减少包的数量，因为连续发</contents></highlight><highlight page="115" rect="65.197,487.741,374.170,533.187" color="#FFCD45" flags="print" name="35181ba5-17a0-d4f1-e158-a8bb07de42e4" title="Guest" subject="高亮" date="D:20220829161539+08'00'" creationdate="D:20220829161539+08'00'" coords="65.1969,533.1871250000002,374.17015000000026,533.1871250000002,65.1969,521.7358250000001,374.17015000000026,521.7358250000001,65.19689999999997,516.1897250000002,374.15589999999986,516.1897250000002,65.19689999999997,504.7384250000001,374.15589999999986,504.7384250000001,65.19689999999993,499.19232500000015,112.69689999999993,499.19232500000015,65.19689999999993,487.74102500000015,112.69689999999993,487.74102500000015"><contents>生窗口更新说明应用程序连续请求了数据，接收缓冲区的剩余空间连续增
加。这种情况和ACK号一样，可以省略中间过程，只要发送最终的结果
就可以了。</contents></highlight><highlight page="117" rect="111.147,204.928,183.147,213.928" color="#FFCD45" flags="print" name="155d9263-3062-d6cd-2240-8bcd1d5c802d" title="Guest" subject="高亮" date="D:20220829162731+08'00'" creationdate="D:20220829162731+08'00'" coords="111.14710000000001,213.928,183.14710000000002,213.928,111.14710000000001,204.928,183.14710000000002,204.928"><contents>断开连接的交互过程</contents></highlight><highlight page="118" rect="53.855,96.305,362.874,192.780" color="#FFCD45" flags="print" name="17efe19d-4b44-48a7-4422-ac8230076e18" title="Guest" subject="高亮" date="D:20220829162752+08'00'" creationdate="D:20220829162752+08'00'" coords="72.83929999999987,192.780125,362.8362999999999,192.780125,72.83929999999987,181.32882500000005,362.8362999999999,181.32882500000005,53.858299999999886,175.78272500000003,362.82679999999976,175.78272500000003,53.858299999999886,164.33142499999997,362.82679999999976,164.33142499999997,53.858299999999886,158.785325,362.8742999999997,158.785325,53.858299999999886,147.334025,362.8742999999997,147.334025,53.86779999999986,141.78792499999997,362.8647999999998,141.78792499999997,53.86779999999986,130.33662500000003,362.8647999999998,130.33662500000003,53.886799999999816,126.021540625,362.833,126.021540625,53.886799999999816,113.339225,362.833,113.339225,53.85500000000002,107.75662499999999,362.8425000000001,107.75662499999999,53.85500000000002,96.30532500000004,362.8425000000001,96.30532500000004"><contents>如果最后客户端返回的ACK号丢失了，结果会如何呢？这时，服务
器没有接收到ACK号，可能会重发一次 FIN。如果这时客户端的套接字已
经删除了，会发生什么事呢？套接字被删除，那么套接字中保存的控制信
息也就跟着消失了，套接字对应的端口号就会被释放出来。这时，如果别
的应用程序要创建套接字，新套接字碰巧又被分配了同一个端口号 B，而服
务器重发的 FIN 正好到达，会怎么样呢？本来这个 FIN 是要发给刚刚删除</contents></highlight><highlight page="119" rect="65.197,487.741,374.189,533.187" color="#FFCD45" flags="print" name="2541034f-513c-fe00-b8a4-ad6d61d92baf" title="Guest" subject="高亮" date="D:20220829162801+08'00'" creationdate="D:20220829162801+08'00'" coords="65.1969,533.1871250000002,374.18915000000004,533.1871250000002,65.1969,521.7358250000001,374.18915000000004,521.7358250000001,65.20639999999997,516.1897250000002,374.1844000000001,516.1897250000002,65.20639999999997,504.7384250000001,374.1844000000001,504.7384250000001,65.21589999999999,499.19232500000015,236.21589999999998,499.19232500000015,65.21589999999999,487.74102500000015,236.21589999999998,487.74102500000015"><contents>的那个套接字的，但新套接字具有相同的端口号，于是这个 FIN 就会错误
地跑到新套接字里面，新套接字就开始执行断开操作了。之所以不马上删
除套接字，就是为了防止这样的误操作。</contents></highlight><highlight page="122" rect="99.808,280.353,147.808,289.353" color="#FFCD45" flags="print" name="3c0ccf9c-020a-a536-46f1-bee57c246b37" title="Guest" subject="高亮" date="D:20220829162958+08'00'" creationdate="D:20220829162958+08'00'" coords="99.8085,289.35310000000004,147.80849999999998,289.35310000000004,99.8085,280.35310000000004,147.80849999999998,280.35310000000004"><contents>网络包的结构</contents></highlight><highlight page="122" rect="99.808,74.921,195.808,83.921" color="#FFCD45" flags="print" name="5bc86c34-7eae-18c4-a4f3-9054c8d16363" title="Guest" subject="高亮" date="D:20220829163107+08'00'" creationdate="D:20220829163107+08'00'" coords="99.8085,83.92110000000002,195.80849999999998,83.92110000000002,99.8085,74.92110000000002,195.80849999999998,74.92110000000002"><contents>发送方、接收方和转发设备</contents></highlight><highlight page="123" rect="99.827,224.751,289.827,236.203" color="#FFCD45" flags="print" name="2a91434e-152d-51a4-8fdc-0312ceaa65a7" title="Guest" subject="高亮" date="D:20220829163408+08'00'" creationdate="D:20220829163408+08'00'" coords="99.82749999999993,236.20277499999992,289.82749999999993,236.20277499999992,99.82749999999993,224.7514749999999,289.82749999999993,224.7514749999999"><contents>路由器根据目标地址判断下一个路由器的位置</contents></highlight><highlight page="123" rect="99.827,207.754,280.327,219.205" color="#FFCD45" flags="print" name="f4f4d483-8533-3cbd-2edc-1df7f6e802ff" title="Guest" subject="高亮" date="D:20220829163413+08'00'" creationdate="D:20220829163413+08'00'" coords="99.82749999999993,219.20537499999995,280.32749999999993,219.20537499999995,99.82749999999993,207.75407499999994,280.32749999999993,207.75407499999994"><contents>集线器在子网中将网络包传输到下一个路由</contents></highlight><highlight page="123" rect="65.152,165.759,374.130,194.208" color="#FFCD45" flags="print" name="c5003174-ea44-3a23-dafb-4ffd3aac9860" title="Guest" subject="高亮" date="D:20220829163416+08'00'" creationdate="D:20220829163416+08'00'" coords="84.15249999999995,194.2080249999999,374.1305,194.2080249999999,84.15249999999995,182.75672499999996,374.1305,182.75672499999996,65.15249999999995,177.21062499999994,274.1525,177.21062499999994,65.15249999999995,165.75932499999993,274.1525,165.75932499999993"><contents>实际上，集线器是按照以太网规则传输包的设备，而路由器是按照 IP
规则传输包的设备，因此我们也可以作如下理解。</contents></highlight><highlight page="123" rect="99.827,140.762,313.843,152.213" color="#FFCD45" flags="print" name="65f3614a-0852-65a3-e617-eb624c0f5e60" title="Guest" subject="高亮" date="D:20220829163419+08'00'" creationdate="D:20220829163419+08'00'" coords="99.82749999999993,152.21327499999995,313.84349999999995,152.21327499999995,99.82749999999993,140.7619749999999,313.84349999999995,140.7619749999999"><contents>IP 协议根据目标地址判断下一个 IP 转发设备的位置</contents></highlight><highlight page="123" rect="99.827,123.765,299.327,135.216" color="#FFCD45" flags="print" name="1697dbc4-0631-f2ff-ef8a-61b6bd053ce3" title="Guest" subject="高亮" date="D:20220829163422+08'00'" creationdate="D:20220829163422+08'00'" coords="99.8274999999999,135.21587499999993,299.3274999999999,135.21587499999993,99.8274999999999,123.76457499999992,299.3274999999999,123.76457499999992"><contents>子网中的以太网协议将包传输到下一个转发设备</contents></highlight><highlight page="124" rect="88.001,521.736,213.192,533.187" color="#FFCD45" flags="print" name="66a46f89-b76b-b30c-b01d-2738bec7baff" title="Guest" subject="高亮" date="D:20220829163704+08'00'" creationdate="D:20220829163704+08'00'" coords="88.00129999999999,533.1871250000002,213.1923,533.1871250000002,88.00129999999999,521.7358250000001,213.1923,521.7358250000001"><contents>MAC头部（用于以太网协议）</contents></highlight><highlight page="124" rect="88.533,504.738,185.224,516.190" color="#FFCD45" flags="print" name="c71e3ba6-63e0-8737-5943-c81cce3abf73" title="Guest" subject="高亮" date="D:20220829163706+08'00'" creationdate="D:20220829163706+08'00'" coords="88.5333,516.1897250000002,185.2243,516.1897250000002,88.5333,504.7384250000001,185.2243,504.7384250000001"><contents>IP 头部（用于 IP 协议）</contents></highlight><highlight page="124" rect="53.849,462.744,362.827,491.192" color="#FFCD45" flags="print" name="fbdd79f3-3fb0-ab03-aade-b4a7c6d79683" title="Guest" subject="高亮" date="D:20220829163718+08'00'" creationdate="D:20220829163718+08'00'" coords="218.03730000000002,491.19237500000014,362.8268,491.19237500000014,218.03730000000002,479.74107500000014,362.8268,479.74107500000014,53.84880000000001,474.1949750000001,245.7203,474.1949750000001,53.84880000000001,462.7436750000001,245.7203,462.7436750000001"><contents>首先，发送方将包的目的地，也就
是要访问的服务器的 IP 地址写入 IP 头部中。</contents></highlight><highlight page="124" rect="53.858,428.749,362.836,457.198" color="#FFCD45" flags="print" name="ce071c50-a13f-404e-d65c-f03a4f4e3604" title="Guest" subject="高亮" date="D:20220829163729+08'00'" creationdate="D:20220829163729+08'00'" coords="130.66580000000005,457.19757500000014,362.83630000000005,457.19757500000014,130.66580000000005,445.74627500000014,362.83630000000005,445.74627500000014,53.85830000000006,440.2001750000001,151.67980000000006,440.2001750000001,53.85830000000006,428.7488750000001,151.67980000000006,428.7488750000001"><contents>IP 协议就可以根据这一地址查找包的传输方向，从而找
到下一个路由器的位置</contents></highlight><highlight page="124" rect="53.858,377.757,362.846,440.200" color="#FFCD45" flags="print" name="d171fc46-90a9-06fb-1a93-bf2e51cd36fd" title="Guest" subject="高亮" date="D:20220829163746+08'00'" creationdate="D:20220829163746+08'00'" coords="332.6358,440.2001750000001,362.84580000000005,440.2001750000001,332.6358,428.7488750000001,362.84580000000005,428.7488750000001,53.86780000000003,423.2027750000001,362.83629999999994,423.2027750000001,53.86780000000003,411.75147500000014,362.83629999999994,411.75147500000014,53.87729999999998,406.2053750000001,362.8363,406.2053750000001,53.87729999999998,394.75407500000006,362.8363,394.75407500000006,53.858299999999986,389.2079750000001,262.8583,389.2079750000001,53.858299999999986,377.7566750000001,262.8583,377.7566750000001"><contents>IP 协议
会委托以太网协议将包传输过去。这时，IP 协议会查找下一个路由器的以
太网地址（MAC地址），并将这个地址写入MAC头部中。这样一来，以太
网协议就知道要将这个包发到哪一个路由器上了。</contents></highlight><highlight page="125" rect="111.147,188.082,184.673,197.082" color="#FFCD45" flags="print" name="2179637b-235b-9e90-7a75-6938235e4490" title="Guest" subject="高亮" date="D:20220829164240+08'00'" creationdate="D:20220829164240+08'00'" coords="111.14710000000001,197.0815,184.6735,197.0815,111.14710000000001,188.0815,184.6735,188.0815"><contents>IP 网络包的传输方式</contents></highlight><highlight page="124" rect="53.871,105.751,362.849,134.200" color="#FFCD45" flags="print" name="b313be0d-2bdd-43ca-4e65-dd4d2b28cc8f" title="Guest" subject="高亮" date="D:20220829164506+08'00'" creationdate="D:20220829164506+08'00'" coords="333.98799999999994,134.20012499999996,362.84899999999993,134.20012499999996,333.98799999999994,122.74882499999995,362.84899999999993,122.74882499999995,53.87099999999997,117.20272499999999,362.83949999999993,117.20272499999999,53.87099999999997,105.75142499999993,362.83949999999993,105.75142499999993"><contents>前面讲
了 IP 和以太网的分工，其中以太网的部分也可以替换成其他的东西，例如</contents></highlight><highlight page="125" rect="65.190,470.741,374.175,533.187" color="#FFCD45" flags="print" name="493bc2ce-9dac-8348-7568-c50c4aad0a7f" title="Guest" subject="高亮" date="D:20220829164510+08'00'" creationdate="D:20220829164510+08'00'" coords="65.1969,533.1871250000002,374.1749,533.1871250000002,65.1969,521.7358250000001,374.1749,521.7358250000001,65.1969,517.534048046875,374.1685,517.534048046875,65.1969,504.7384250000001,374.1685,504.7384250000001,65.19049999999996,499.189625,374.1685,499.189625,65.19049999999996,487.738325,374.1685,487.738325,65.19999999999995,482.192225,245.69999999999993,482.192225,65.19999999999995,470.740925,245.69999999999993,470.740925"><contents>无线局域网、ADSL、FTTH 等，它们都可以替代以太网的角色帮助 IP 协
议来传输网络包 A。因此，将 IP 和负责传输的网络分开，可以更好地根据需
要使用各种通信技术。像互联网这样庞大复杂的网络，在架构上需要保证
灵活性，这就是设计这种分工方式的原因。</contents></highlight><highlight page="126" rect="53.816,402.754,367.544,465.198" color="#FFCD45" flags="print" name="e30bc90e-a127-740b-910f-fffd35c9ec63" title="Guest" subject="高亮" date="D:20220829164853+08'00'" creationdate="D:20220829164853+08'00'" coords="213.45359999999997,465.1975250000001,362.8126,465.1975250000001,213.45359999999997,453.7462250000001,362.8126,453.7462250000001,53.83459999999991,448.2001250000001,367.5435999999999,448.2001250000001,53.83459999999991,436.7488250000001,367.5435999999999,436.7488250000001,53.815599999999904,431.2027250000001,362.80309999999986,431.2027250000001,53.815599999999904,419.7514250000001,362.80309999999986,419.7514250000001,53.81559999999985,414.2053250000001,106.06559999999988,414.2053250000001,53.81559999999985,402.75402500000007,106.06559999999988,402.75402500000007"><contents>TCP 模块在数据块的前面加上 TCP
头部，然后整个传递给 IP 模块，这部分就是网络包的内容。与此同时，
TCP 模块还需要指定通信对象的 IP 地址，也就是需要写清楚“将什么内
容发给谁”。</contents></highlight><highlight page="127" rect="88.768,421.318,299.231,465.537" color="#FFCD45" flags="print" name="0db3f8ae-ab66-bd8e-55f8-1aa19b1d61bc" title="Guest" subject="高亮" date="D:20220829165032+08'00'" creationdate="D:20220829165032+08'00'" coords="93.51849999999999,465.5366750000001,228.33679999999998,465.5366750000001,93.51849999999999,454.3148000000001,228.33679999999998,454.3148000000001,88.76849999999999,449.0380250000001,299.23055,449.0380250000001,88.76849999999999,437.8161500000001,299.23055,437.8161500000001,88.76849999999999,432.5393750000001,256.97835,432.5393750000001,88.76849999999999,421.3175000000001,256.97835,421.3175000000001"><contents>IP 模块负责添加如下两个头部。
（1） MAC头部：以太网用的头部，包含MAC地址
（2） IP 头部：IP 用的头部，包含 IP 地址</contents></highlight><highlight page="130" rect="82.225,319.333,348.628,363.552" color="#FFCD45" flags="print" name="357b5ee2-9a1b-0cc0-7242-afd2be4c7b69" title="Guest" subject="高亮" date="D:20220829170453+08'00'" creationdate="D:20220829170453+08'00'" coords="82.22529999999983,363.55227500000007,310.93019999999984,363.55227500000007,82.22529999999983,352.33040000000005,310.93019999999984,352.33040000000005,82.22529999999983,347.05362500000007,348.62809999999996,347.05362500000007,82.22529999999983,335.83175000000006,348.62809999999996,335.83175000000006,82.22529999999983,330.55497500000007,110.72529999999983,330.55497500000007,82.22529999999983,319.33310000000006,110.72529999999983,319.33310000000006"><contents>IP 头部的“接收方 IP 地址”填写通信对象的 IP 地址。
发送方 IP 地址需要判断发送所使用的网卡，并填写该网卡的 IP
地址。</contents></highlight><highlight page="131" rect="111.147,190.176,151.147,199.176" color="#FFCD45" flags="print" name="4dfc175a-4439-e7c3-659b-7fe02037e6bf" title="Guest" subject="高亮" date="D:20220829171041+08'00'" creationdate="D:20220829171041+08'00'" coords="111.14710000000001,199.17600000000004,151.14710000000002,199.17600000000004,111.14710000000001,190.17600000000004,151.14710000000002,190.17600000000004"><contents>路由表示例</contents></highlight><highlight page="131" rect="82.387,88.805,303.382,100.433" color="#FFCD45" flags="print" name="2242cc2d-4795-8a11-f63e-3b2a6dda53ab" title="Guest" subject="高亮" date="D:20220829171301+08'00'" creationdate="D:20220829171301+08'00'" coords="82.3869,100.4332,303.3819,100.4332,82.3869,88.80520000000001,303.3819,88.80520000000001"><contents>Gateway（网关）在 TCP/IP 的世界里就是路由器的意思。</contents></highlight><highlight page="131" rect="82.810,61.562,374.207,86.438" color="#FFCD45" flags="print" name="8f75667c-98b7-9989-f309-ed0dde8df9ba" title="Guest" subject="高亮" date="D:20220829171320+08'00'" creationdate="D:20220829171320+08'00'" coords="82.8099,86.43820000000005,374.2074,86.43820000000005,82.8099,74.81020000000001,374.2074,74.81020000000001,83.20589999999999,71.39920000000006,248.70689999999996,71.39920000000006,83.20589999999999,61.56219999999996,248.70689999999996,61.56219999999996"><contents>如果 Gateway 和 Interface 列的 IP 地址相同，就表示不需要路由器进行转
发，可以直接将包发给接收方的 IP 地址。</contents></highlight><highlight page="133" rect="65.187,182.360,374.165,244.804" color="#FFCD45" flags="print" name="62275e4a-da56-10b7-f8b2-048403d8aeea" title="Guest" subject="高亮" date="D:20220829171858+08'00'" creationdate="D:20220829171858+08'00'" coords="193.9124,244.803725,374.1654,244.803725,193.9124,233.35242500000004,374.1654,233.35242500000004,65.1969,227.80632500000002,374.1559000000001,227.80632500000002,65.1969,216.355025,374.1559000000001,216.355025,65.18739999999998,210.808925,374.1559,210.808925,65.18739999999998,199.35762499999998,374.1559,199.35762499999998,65.18739999999995,195.14034804687503,329.11,195.14034804687503,65.18739999999995,182.360225,329.11,182.360225"><contents>在 IP 中，协议号表示 IP 头部后面的包内容
的类型；而在以太网中，我们可以认为以太网类型后面就是以太网包的内
容，而以太类型就表示后面内容的类型。以太网包的内容可以是 IP、ARP
等协议的包，它们都有对应的值，这也是根据规则来确定的 A。</contents></highlight><highlight page="134" rect="82.183,267.341,344.657,278.563" color="#FFCD45" flags="print" name="df499cc5-40f3-f23a-2679-bb08a3dff906" title="Guest" subject="高亮" date="D:20220829172144+08'00'" creationdate="D:20220829172144+08'00'" coords="82.18290000000005,278.5625749999999,344.65745000000004,278.5625749999999,82.18290000000005,267.34069999999997,344.65745000000004,267.34069999999997"><contents>IP 模块根据路由表 Gateway 栏的内容判断应该把包发送给谁。</contents></highlight><highlight page="134" rect="91.535,220.582,282.013,233.089" color="#FFCD45" flags="print" name="c29558d5-f612-cd84-a931-7d6cd0a2d79d" title="Guest" subject="高亮" date="D:20220829172155+08'00'" creationdate="D:20220829172155+08'00'" coords="91.53500000000001,233.0888,282.01320000000004,233.0888,91.53500000000001,220.58179999999993,282.01320000000004,220.58179999999993"><contents>通过 ARP 查询目标路由器的MAC地址</contents></highlight><highlight page="134" rect="70.967,60.795,270.722,72.423" color="#FFCD45" flags="print" name="babb10cf-f5ae-b65b-2ee0-9938a6f61efa" title="Guest" subject="高亮" date="D:20220829172245+08'00'" creationdate="D:20220829172245+08'00'" coords="70.96729999999997,72.42319999999995,270.7223,72.42319999999995,70.96729999999997,60.79520000000002,270.7223,60.79520000000002"><contents>ARP：Address Resolution Protocol，地址解析协议。</contents></highlight><highlight page="135" rect="65.168,487.741,374.165,533.187" color="#FFCD45" flags="print" name="f692917e-5adf-feb4-3e55-2fa5e3374043" title="Guest" subject="高亮" date="D:20220829172331+08'00'" creationdate="D:20220829172331+08'00'" coords="65.1969,533.1871250000002,374.1654,533.1871250000002,65.1969,521.7358250000001,374.1654,521.7358250000001,65.18740000000003,516.1897250000002,374.13689999999997,516.1897250000002,65.18740000000003,504.7384250000001,374.13689999999997,504.7384250000001,65.16839999999999,500.534048046875,118.924435,500.534048046875,65.16839999999999,487.74102500000015,118.924435,487.74102500000015"><contents>用广播对所有设备提问：“××这个 IP 地址是谁的？请把你的MAC地址
告诉我。”然后就会有人回答：“这个 IP 地址是我的，我的 MAC地址是
××××。”A</contents></highlight><highlight page="135" rect="111.147,322.011,193.205,331.011" color="#FFCD45" flags="print" name="a6d46419-6878-3b58-0f30-b016a700949a" title="Guest" subject="高亮" date="D:20220829172334+08'00'" creationdate="D:20220829172334+08'00'" coords="111.14710000000001,331.0107,193.2047,331.0107,111.14710000000001,322.0107,193.2047,322.0107"><contents>用 ARP查询MAC地址</contents></highlight><highlight page="135" rect="65.149,171.217,374.156,250.658" color="#FFCD45" flags="print" name="f715a7c8-8dda-e37d-d2b8-bf2d82e70471" title="Guest" subject="高亮" date="D:20220829172458+08'00'" creationdate="D:20220829172458+08'00'" coords="112.91540000000003,250.65822500000002,374.1369000000001,250.65822500000002,112.91540000000003,239.20692500000007,374.1369000000001,239.20692500000007,65.15890000000005,233.66082500000005,374.1559000000001,233.66082500000005,65.15890000000005,222.20952500000004,374.1559000000001,222.20952500000004,65.16840000000008,216.66342500000007,374.1084,216.66342500000007,65.16840000000008,205.21212500000001,374.1084,205.21212500000001,65.14940000000007,199.66602500000005,374.1274,199.66602500000005,65.14940000000007,188.21472500000004,374.1274,188.21472500000004,65.14940000000004,182.66862500000002,364.3329,182.66862500000002,65.14940000000004,171.21732500000002,364.3329,171.21732500000002"><contents>如果每次发送包都要这样查询一次，网络中就会增加很多 ARP
包，因此我们会将查询结果放到一块叫作 ARP 缓存的内存空间中留着以后
用。也就是说，在发送包时，先查询一下 ARP 缓存，如果其中已经保存
了对方的 MAC 地址，就不需要发送 ARP 查询，直接使用 ARP 缓存中的
地址，而当 ARP 缓存中不存在对方MAC 地址时，则发送 ARP 查询。</contents></highlight><highlight page="135" rect="82.387,88.805,292.888,100.433" color="#FFCD45" flags="print" name="b2ae0c1a-11c2-ff0e-c2d1-645e305cc5fd" title="Guest" subject="高亮" date="D:20220829172609+08'00'" creationdate="D:20220829172609+08'00'" coords="82.3868,100.4332,292.88779999999997,100.4332,82.3868,88.80520000000001,292.88779999999997,88.80520000000001"><contents>不是这个 IP 地址的设备会忽略广播，什么都不回答。</contents></highlight><highlight page="135" rect="82.810,61.562,374.158,86.438" color="#FFCD45" flags="print" name="ddf13948-e960-c08a-61d9-262f39a89d3f" title="Guest" subject="高亮" date="D:20220829172611+08'00'" creationdate="D:20220829172611+08'00'" coords="82.8098,86.43820000000005,374.1577999999999,86.43820000000005,82.8098,74.81020000000001,374.1577999999999,74.81020000000001,83.1968,71.39920000000006,336.9518,71.39920000000006,83.1968,61.56219999999996,336.9518,61.56219999999996"><contents>如果路由表的设置正确，那么对方应该在同一子网，否则对方无法作出
ARP 响应，这时只能认为对方不存在，包的发送操作就会失败。</contents></highlight><highlight page="137" rect="93.543,437.314,226.618,448.536" color="#FFCD45" flags="print" name="098a6470-f676-3183-0b78-a1a305ec28e0" title="Guest" subject="高亮" date="D:20220829173046+08'00'" creationdate="D:20220829173046+08'00'" coords="93.5433,448.53625,226.61835000000002,448.53625,93.5433,437.314375,226.61835000000002,437.314375"><contents>查询MAC地址需要使用ARP。</contents></highlight><highlight page="137" rect="65.190,302.248,378.918,381.689" color="#FFCD45" flags="print" name="a2d8a48f-3f0c-33b1-39cc-be3f87fe0559" title="Guest" subject="高亮" date="D:20220829173713+08'00'" creationdate="D:20220829173713+08'00'" coords="234.95549999999992,381.68899999999996,378.9185,381.68899999999996,234.95549999999992,370.23769999999996,378.9185,370.23769999999996,65.19049999999994,364.69159999999994,374.2017499999999,364.69159999999994,65.19049999999994,353.24029999999993,374.2017499999999,353.24029999999993,65.19999999999989,347.6941999999999,374.1684999999999,347.6941999999999,65.19999999999989,336.24289999999996,374.1684999999999,336.24289999999996,65.19999999999985,330.69679999999994,374.1684999999999,330.69679999999994,65.19999999999985,319.2454999999999,374.1684999999999,319.2454999999999,65.19999999999982,313.6993999999999,312.43749999999983,313.6993999999999,65.19999999999982,302.2480999999999,312.43749999999983,302.2480999999999"><contents>让 IP 负责整个打包工作是有利的。
如果在交给网卡之前，IP 模块能够完成整个打包工作，那么网卡只要将打好
的包发送出去就可以了。对于除 IP 以外的其他类型的包也是一样，如果在
交给网卡之前完成打包，那么对于网卡来说，发送的操作和发送 IP 包是完全
相同的。这样一来，同一块网卡就可以支持各种类型的包。</contents></highlight><highlight page="138" rect="99.808,159.703,163.808,168.703" color="#FFCD45" flags="print" name="85721891-0dbb-dcbd-67ff-bfb5c5afb83c" title="Guest" subject="高亮" date="D:20220829173935+08'00'" creationdate="D:20220829173935+08'00'" coords="99.8085,168.70349999999996,163.80849999999998,168.70349999999996,99.8085,159.70349999999996,163.80849999999998,159.70349999999996"><contents>以太网的基本结构</contents></highlight><highlight page="139" rect="82.540,61.545,374.230,128.433" color="#FFCD45" flags="print" name="6655d7c7-e2b0-169e-698c-533733c26b06" title="Guest" subject="高亮" date="D:20220829174742+08'00'" creationdate="D:20220829174742+08'00'" coords="82.53979999999999,128.4332,374.1892999999999,128.4332,82.53979999999999,116.80520000000001,374.1892999999999,116.80520000000001,83.20579999999998,113.39420000000001,374.1667999999999,113.39420000000001,83.20579999999998,103.55720000000002,374.1667999999999,103.55720000000002,83.20579999999991,99.39020000000005,374.0758999999998,99.39020000000005,83.20579999999991,89.55320000000006,374.0758999999998,89.55320000000006,83.20579999999991,85.38620000000003,374.22979999999995,85.38620000000003,83.20579999999991,75.54919999999993,374.22979999999995,75.54919999999993,83.20579999999991,71.38220000000001,182.2057999999999,71.38220000000001,83.20579999999991,61.54520000000002,182.2057999999999,61.54520000000002"><contents>这些性质也适用于无线局域网。也就是说，将包发送到MAC头部的接收
方MAC地址所代表的目的地，用发送方MAC地址识别发送方，在这些
方面无线局域网和以太网是一样的。无线局域网没有以太类型，但有另一
个具备同样功能的参数，可以认为它就是以太类型。因此，我们可以用无
线局域网来代替以太网。</contents></highlight><highlight page="140" rect="53.870,197.313,367.598,225.762" color="#FFCD45" flags="print" name="5ca6dd5c-ec06-549e-39a5-969621c7b3c6" title="Guest" subject="高亮" date="D:20220829175109+08'00'" creationdate="D:20220829175109+08'00'" coords="72.86999999999998,225.76182500000004,367.59799999999996,225.76182500000004,72.86999999999998,214.31052500000004,367.59799999999996,214.31052500000004,53.869999999999976,208.76442500000007,140.61449999999996,208.76442500000007,53.869999999999976,197.313125,140.61449999999996,197.313125"><contents>网卡并不是通上电之后就可以马上开始工作的，而是和其他硬件一样，
都需要进行初始化。</contents></highlight><highlight page="140" rect="246.967,146.321,362.848,157.772" color="#FFCD45" flags="print" name="bf49d718-457a-eaad-e77b-5bfeff0784d1" title="Guest" subject="高亮" date="D:20220829175118+08'00'" creationdate="D:20220829175118+08'00'" coords="246.9669999999999,157.772225,362.84799999999996,157.772225,246.9669999999999,146.320925,362.84799999999996,146.320925"><contents>那就是在控制以太网收发操</contents></highlight><highlight page="141" rect="65.197,141.185,218.020,153.983" color="#FFCD45" flags="print" name="bb4d3cf4-b8f9-63c3-f311-8869cc12c32a" title="Guest" subject="高亮" date="D:20220829175123+08'00'" creationdate="D:20220829175123+08'00'" coords="65.1969,153.982848046875,218.0201,153.982848046875,65.1969,141.18462499999998,218.0201,141.18462499999998"><contents>作的MACA 模块中设置MAC地址。</contents></highlight><highlight page="141" rect="82.387,61.553,374.212,100.433" color="#FFCD45" flags="print" name="a6f1d19e-d3e9-597a-fa55-a083e39d2392" title="Guest" subject="高亮" date="D:20220829175508+08'00'" creationdate="D:20220829175508+08'00'" coords="82.3869,100.4332,374.16689999999994,100.4332,82.3869,88.80520000000001,374.16689999999994,88.80520000000001,83.18789999999996,85.39419999999996,374.2118999999998,85.39419999999996,83.18789999999996,75.55719999999997,374.2118999999998,75.55719999999997,83.18789999999996,71.39020000000005,241.19189999999998,71.39020000000005,83.18789999999996,61.55320000000006,241.19189999999998,61.55320000000006"><contents>MAC：Media Access Control 的缩写。MAC头部、MAC地址中的MAC也
是这个意思。也就是说，通过MAC模块控制包收发操作时所使用的头部
和地址就叫作MAC头部和MAC地址。</contents></highlight><highlight page="142" rect="82.205,369.814,348.663,397.536" color="#FFCD45" flags="print" name="edd73d1e-d86e-b71d-6a3f-e95015cdca06" title="Guest" subject="高亮" date="D:20220829175724+08'00'" creationdate="D:20220829175724+08'00'" coords="82.2047,397.53625,348.6626,397.53625,82.2047,386.314375,348.6626,386.314375,82.2047,381.03625,139.2047,381.03625,82.2047,369.814375,139.2047,369.814375"><contents>网卡的ROM中保存着全世界唯一的MAC地址，这是在生产网
卡时写入的。</contents></highlight><highlight page="142" rect="82.205,303.314,348.620,331.036" color="#FFCD45" flags="print" name="c4a3f7c5-6786-d78c-6e71-6e533e004e01" title="Guest" subject="高亮" date="D:20220829175730+08'00'" creationdate="D:20220829175730+08'00'" coords="82.2047,331.03625,348.6198500000001,331.03625,82.2047,319.814375,348.6198500000001,319.814375,82.2047,314.53625,110.7047,314.53625,82.2047,303.314375,110.7047,303.314375"><contents>网卡中保存的MAC地址会由网卡驱动程序读取并分配给MAC
模块。</contents></highlight><highlight page="142" rect="71.048,61.559,367.256,100.439" color="#FFCD45" flags="print" name="bad92048-db0a-acc0-bcdf-0a6728f789b2" title="Guest" subject="高亮" date="D:20220829175830+08'00'" creationdate="D:20220829175830+08'00'" coords="71.04829999999998,100.43920000000003,362.8453999999999,100.43920000000003,71.04829999999998,88.81119999999999,362.8453999999999,88.81119999999999,71.84929999999999,85.40020000000004,367.2562999999999,85.40020000000004,71.84929999999999,75.56320000000005,367.2562999999999,75.56320000000005,71.84929999999999,71.39620000000002,278.84929999999997,71.39620000000002,71.84929999999999,61.55920000000003,278.84929999999997,61.55920000000003"><contents>制定以太网标准的组织 IEEE 出于历史原因使用了“帧”而不是“包”，因
此在以太网术语中都是说“帧”，其实我们基本没必要讨论两者的区别，
大家可以认为包和帧是一回事，只是说法不同罢了。</contents></highlight><highlight page="142" rect="53.849,166.313,362.827,194.762" color="#FFCD45" flags="print" name="8b56478f-3d8d-1e4b-8274-1ff2716ff613" title="Guest" subject="高亮" date="D:20220829175853+08'00'" creationdate="D:20220829175853+08'00'" coords="101.32979999999986,194.76182499999993,362.8267999999999,194.76182499999993,101.32979999999986,183.31052499999998,362.8267999999999,183.31052499999998,53.84879999999987,179.02154062500006,310.5897,179.02154062500006,53.84879999999987,166.31312499999996,310.5897,166.31312499999996"><contents>MAC模块会将包从缓冲区中取出，并在开头加上报头和起始帧
分界符，在末尾加上用于检测错误的帧校验序列（图 2.24）C。</contents></highlight><highlight page="143" rect="100.111,390.973,373.379,419.570" color="#FFCD45" flags="print" name="f0f95e6a-356b-7abf-f091-8f2f017d736b" title="Guest" subject="高亮" date="D:20220829184608+08'00'" creationdate="D:20220829184608+08'00'" coords="111.14710000000001,419.5697,175.14710000000002,419.5697,111.14710000000001,410.5697,175.14710000000002,410.5697,100.11110000000001,409.4679,102.18860000000001,409.4679,100.11110000000001,400.9704,102.18860000000001,400.9704,134.05610000000001,409.4679,373.37885000000006,409.4679,134.05610000000001,400.9704,373.37885000000006,400.9704,111.21860000000002,399.4704,272.41010000000006,399.4704,111.21860000000002,390.97290000000004,272.41010000000006,390.97290000000004,111.2261,409.4679,133.9511,409.4679,111.2261,400.9704,133.9511,400.9704"><contents>网卡发送出去的包
 
示了协议栈和网卡对包的处理过程。MAC 头部很容易被误解为是由网卡
来处理的，实际上它是由 TCP/IP 软件来负责的。
图中显</contents></highlight><highlight page="145" rect="65.168,283.772,378.896,363.213" color="#FFCD45" flags="print" name="4c8690e4-7f58-ab48-7e1f-bb9ec7aaa7fe" title="Guest" subject="高亮" date="D:20220829185609+08'00'" creationdate="D:20220829185609+08'00'" coords="84.17789999999981,363.2131250000001,374.15589999999975,363.2131250000001,84.17789999999981,351.76182500000004,374.15589999999975,351.76182500000004,65.17789999999977,346.2157250000001,378.89639999999986,346.2157250000001,65.17789999999977,334.7644250000001,378.89639999999986,334.7644250000001,65.16839999999979,329.21832500000005,374.15589999999975,329.21832500000005,65.16839999999979,317.7670250000001,374.15589999999975,317.7670250000001,65.17789999999974,312.2209250000001,374.14830000000006,312.2209250000001,65.17789999999974,300.769625,374.14830000000006,300.769625,65.16839999999975,296.534048046875,205.60999999999999,296.534048046875,65.16839999999975,283.77222500000005,205.60999999999999,283.77222500000005"><contents>这里的重点在于如何判断时钟信号的变化周期。时钟信号是以 10 Mbit/s
或者 100 Mbit/s 这种固定频率进行变化的，就像我们乘坐自动扶梯一样，
只要对信号进行一段时间的观察，就可以找到其变化的周期。因此，我们
不能一开始就发送包的数据，而是要在前面加上一段用来测量时钟信号的
特殊信号，这就是报头的作用 A。</contents></highlight><highlight page="146" rect="53.868,350.308,362.865,378.757" color="#FFCD45" flags="print" name="58f6ef42-c61a-1d4c-a6eb-7a560346d05c" title="Guest" subject="高亮" date="D:20220829190450+08'00'" creationdate="D:20220829190450+08'00'" coords="131.7488,378.75662500000004,362.8648,378.75662500000004,131.7488,367.30532500000004,362.8648,367.30532500000004,53.86779999999996,363.02154062500006,244.13840000000002,363.02154062500006,53.86779999999996,350.30792500000007,244.13840000000002,350.30792500000007"><contents>发送信号的操作分为两种，一种是使用集线器的半双工
模式，另一种是使用交换机的全双工 B 模式。</contents></highlight><highlight page="146" rect="53.847,214.308,367.581,293.764" color="#FFCD45" flags="print" name="bf914216-ab5b-2f19-e03d-6035754bb003" title="Guest" subject="高亮" date="D:20220829190500+08'00'" creationdate="D:20220829190500+08'00'" coords="339.0718999999999,293.764425,367.5813999999999,293.764425,339.0718999999999,282.313125,367.5813999999999,282.313125,53.85339999999994,276.76702500000005,367.5813999999999,276.76702500000005,53.85339999999994,265.31572500000004,367.5813999999999,265.31572500000004,53.86289999999994,261.021540625,362.8349,261.021540625,53.86289999999994,248.31832500000002,362.8349,248.31832500000002,53.856899999999996,242.75662499999999,362.8064,242.75662499999999,53.856899999999996,231.30532499999998,362.8064,231.30532499999998,53.84739999999999,225.75922499999996,216.4114,225.75922499999996,53.84739999999999,214.30792499999995,216.4114,214.30792499999995"><contents>首先，
MAC模块从报头开始将数字信息按每个比特转换成电信号，然后由 PHY，
或者叫MAU的信号收发模块发送出去 C。在这里，将数字信息转换为电信
号的速率就是网络的传输速率，例如每秒将 10 Mbit 的数字信息转换为电
信号发送出去，则速率就是 10 Mbit/s。</contents></highlight><highlight page="146" rect="53.838,163.316,367.566,208.762" color="#FFCD45" flags="print" name="7cf2bbd3-0fbe-04e1-6220-c8ec0af644e4" title="Guest" subject="高亮" date="D:20220829190723+08'00'" creationdate="D:20220829190723+08'00'" coords="72.8474,208.76182499999993,367.5659,208.76182499999993,72.8474,197.31052499999998,367.5659,197.31052499999998,53.83789999999999,191.76442499999996,362.8121,191.76442499999996,53.83789999999999,180.31312499999996,362.8121,180.31312499999996,53.837899999999934,174.76702499999993,362.79689999999994,174.76702499999993,53.837899999999934,163.31572499999993,362.79689999999994,163.31572499999993"><contents>接下来，PHY（MAU）模块会将信号转换为可在网线上传输的格式，
并通过网线发送出去。以太网规格中对不同的网线类型和速率以及其对应
的信号格式进行了规定，但MAC模块并不关心这些区别，而是将可转换</contents></highlight><highlight page="147" rect="65.168,504.738,374.146,533.187" color="#FFCD45" flags="print" name="42ad61d3-00d3-4051-ab36-0720995b2eec" title="Guest" subject="高亮" date="D:20220829190738+08'00'" creationdate="D:20220829190738+08'00'" coords="65.1969,533.1871250000002,374.14639999999997,533.1871250000002,65.1969,521.7358250000001,374.14639999999997,521.7358250000001,65.16839999999999,516.1897250000002,229.2524,516.1897250000002,65.16839999999999,504.7384250000001,229.2524,504.7384250000001"><contents>为任意格式的通用信号发送给 PHY（MAU）模块，然后 PHY（MAU）模块
再将其转换为可在网线上传输的格式。</contents></highlight><highlight page="147" rect="93.543,126.139,360.049,153.859" color="#FFCD45" flags="print" name="48b4569a-c4bc-5a4c-0781-8020daa27518" title="Guest" subject="高亮" date="D:20220829190959+08'00'" creationdate="D:20220829190959+08'00'" coords="93.5433,153.85905000000002,360.0487,153.85905000000002,93.5433,142.63717499999996,360.0487,142.63717499999996,93.5433,137.36040000000003,302.5433,137.36040000000003,93.5433,126.13852499999996,302.5433,126.13852499999996"><contents>网卡的MAC模块生成通用信号，然后由 PHY（MAU）模块转换
成可在网线中传输的格式，并通过网线发送出去。</contents></highlight><highlight page="148" rect="53.830,487.741,362.814,533.187" color="#FFCD45" flags="print" name="a06dd6bd-3853-8c87-55ef-5a35309dadfe" title="Guest" subject="高亮" date="D:20220829191124+08'00'" creationdate="D:20220829191124+08'00'" coords="72.85829999999999,533.1871250000002,362.81445,533.1871250000002,72.85829999999999,521.7358250000001,362.81445,521.7358250000001,53.839299999999966,516.1897250000002,362.80780000000004,516.1897250000002,53.839299999999966,504.7384250000001,362.80780000000004,504.7384250000001,53.829799999999985,499.19232500000015,314.4147999999999,499.19232500000015,53.829799999999985,487.74102500000015,314.4147999999999,487.74102500000015"><contents>PHY（MAU）的职责并不是仅仅是将MAC模块传递过来的信号通过
网线发送出去，它还需要监控接收线路中有没有信号进来。在开始发送信
号之前，需要先确认没有其他信号进来，这时才能开始发送。</contents></highlight><highlight page="148" rect="53.820,402.738,367.587,465.198" color="#FFCD45" flags="print" name="5e6c6839-f14d-6d74-4c3b-96531c8a5dd8" title="Guest" subject="高亮" date="D:20220829191157+08'00'" creationdate="D:20220829191157+08'00'" coords="92.3332999999999,465.1975250000001,362.7887999999999,465.1975250000001,92.3332999999999,453.7462250000001,362.7887999999999,453.7462250000001,53.820299999999904,449.534048046875,367.58709999999996,449.534048046875,53.820299999999904,436.7488250000001,367.58709999999996,436.7488250000001,53.859099999999984,432.454540625,362.78980000000007,432.454540625,53.859099999999984,419.73842499999995,362.78980000000007,419.73842499999995,53.84980000000004,414.18972499999995,110.84980000000004,414.18972499999995,53.84980000000004,402.73842499999995,110.84980000000004,402.73842499999995"><contents>。以太网不会确认发送的信号对方有没有收到。根据以太网的规
格，两台设备之间的网线不能超过 100 米 A，在这个距离内极少会发生错误，
万一 B 发生错误，协议栈的 TCP 也会负责搞定，因此在发送信号时没有必
要检查错误。</contents></highlight><highlight page="148" rect="72.850,385.741,295.026,397.192" color="#FFCD45" flags="print" name="fef5021c-e8b5-01c9-cf81-d582dda3822e" title="Guest" subject="高亮" date="D:20220829191323+08'00'" creationdate="D:20220829191323+08'00'" coords="72.84980000000004,397.192325,295.02630000000005,397.192325,72.84980000000004,385.741025,295.02630000000005,385.741025"><contents>在发送信号的过程中，接收线路不应该有信号进来，</contents></highlight><highlight page="148" rect="53.831,351.746,362.809,380.195" color="#FFCD45" flags="print" name="9e389d9f-45da-d4f9-c53b-8c4f764e908d" title="Guest" subject="高亮" date="D:20220829191333+08'00'" creationdate="D:20220829191333+08'00'" coords="333.96680000000003,380.19492499999996,362.8088,380.19492499999996,333.96680000000003,368.74362499999995,362.8088,368.74362499999995,53.83080000000002,363.1975249999999,319.8308,363.1975249999999,53.83080000000002,351.746225,319.8308,351.746225"><contents>。如果
有其他设备同时发送信号，这些信号就会通过接收线路传进来。</contents></highlight><highlight page="148" rect="53.831,317.751,362.780,346.200" color="#FFCD45" flags="print" name="de2cded0-faf8-681e-da28-f6344794c54c" title="Guest" subject="高亮" date="D:20220829191342+08'00'" creationdate="D:20220829191342+08'00'" coords="72.83080000000001,346.20012499999996,362.7802999999999,346.20012499999996,72.83080000000001,334.74882499999995,362.7802999999999,334.74882499999995,53.83079999999998,329.20272499999993,285.5168,329.20272499999993,53.83079999999998,317.7514249999999,285.5168,317.7514249999999"><contents>在使用集线器的半双工模式中，一旦发生这种情况，两组信号就会相
互叠加，无法彼此区分出来，这就是所谓的信号碰撞。</contents></highlight><highlight page="148" rect="53.840,266.738,362.837,312.205" color="#FFCD45" flags="print" name="eb5d3ae0-d549-b19d-ab08-9f720d0d3915" title="Guest" subject="高亮" date="D:20220829191350+08'00'" creationdate="D:20220829191350+08'00'" coords="256.5987999999999,312.2053249999999,362.8088,312.2053249999999,256.5987999999999,300.75402499999996,362.8088,300.75402499999996,53.84029999999993,296.454540625,362.8372,296.454540625,53.84029999999993,283.75662499999993,362.8372,283.75662499999993,53.85919999999999,278.18972499999995,91.85919999999999,278.18972499999995,53.85919999999999,266.73842499999995,91.85919999999999,266.73842499999995"><contents>为了通知其他设备当前线
路已发生碰撞，还会发送一段时间的阻塞信号 C，然后所有的发送操作会全
部停止。</contents></highlight><highlight page="148" rect="53.859,198.749,362.856,261.192" color="#FFCD45" flags="print" name="65afdb7c-bfab-4a1d-5061-9c198587f0df" title="Guest" subject="高亮" date="D:20220829191356+08'00'" creationdate="D:20220829191356+08'00'" coords="72.85919999999999,261.192325,362.8182,261.192325,72.85919999999999,249.74102499999992,362.8182,249.74102499999992,53.85919999999999,244.19492499999996,362.8372,244.19492499999996,53.85919999999999,232.74362499999995,362.8372,232.74362499999995,53.85919999999999,227.19752499999993,362.8562,227.19752499999993,53.85919999999999,215.74622499999998,362.8562,215.74622499999998,53.86869999999999,210.20012499999996,82.74869999999999,210.20012499999996,53.86869999999999,198.74882499999995,82.74869999999999,198.74882499999995"><contents>等待一段时间之后，网络中的设备会尝试重新发送信号。但如果所有
设备的等待时间都相同，那肯定还会发生碰撞，因此必须让等待的时间
相互错开。具体来说，等待时间是根据 MAC 地址生成一个随机数计算出
来的。</contents></highlight><highlight page="148" rect="53.859,130.759,362.856,193.203" color="#FFCD45" flags="print" name="dff8ae97-93ea-9c3d-95ad-c04090985e01" title="Guest" subject="高亮" date="D:20220829191409+08'00'" creationdate="D:20220829191409+08'00'" coords="72.86869999999999,193.20272499999993,362.7992,193.20272499999993,72.86869999999999,181.75142499999993,362.7992,181.75142499999993,53.85919999999999,176.2053249999999,362.8372,176.2053249999999,53.85919999999999,164.75402499999996,362.8372,164.75402499999996,53.859200000000016,159.20792499999993,362.8562,159.20792499999993,53.859200000000016,147.75662499999993,362.8562,147.75662499999993,53.87820000000002,142.2105249999999,205.8782,142.2105249999999,53.87820000000002,130.7592249999999,205.8782,130.7592249999999"><contents>当网络拥塞时，发生碰撞的可能性就会提高，重试发送的时候可能又
会和另外一台设备的发送操作冲突，这时会将等待时间延长一倍，然后再
次重试。以此类推，每次发生碰撞就将等待时间延长一倍，最多重试 10
次，如果还是不行就报告通信错误。</contents></highlight><highlight page="148" rect="70.949,60.811,365.879,72.439" color="#FFCD45" flags="print" name="5b2bdc83-b130-8ab9-7d0d-61efe0de25e3" title="Guest" subject="高亮" date="D:20220829191427+08'00'" creationdate="D:20220829191427+08'00'" coords="70.9493,72.43920000000003,365.87930000000017,72.43920000000003,70.9493,60.811199999999985,365.87930000000017,60.811199999999985"><contents>阻塞信号：以太网中发生碰撞时，为了告知所有设备而发送的一种特殊信号。</contents></highlight><highlight page="150" rect="53.839,317.738,362.831,397.208" color="#FFCD45" flags="print" name="8160c644-8737-8fce-4ba3-8265dd722f48" title="Guest" subject="高亮" date="D:20220829192344+08'00'" creationdate="D:20220829192344+08'00'" coords="237.2274,397.2079250000001,362.81739999999996,397.2079250000001,237.2274,385.7566250000001,362.81739999999996,385.7566250000001,53.8489,380.2105250000001,362.8174,380.2105250000001,53.8489,368.7592250000001,362.8174,368.7592250000001,53.83939999999998,363.2131250000001,362.8221500000001,363.2131250000001,53.83939999999998,351.76182500000004,362.8221500000001,351.76182500000004,53.83939999999997,347.454540625,362.8313,347.454540625,53.83939999999997,334.7644250000001,362.8313,334.7644250000001,53.85329999999999,329.18972499999995,110.85329999999999,329.18972499999995,53.85329999999999,317.73842499999995,110.85329999999999,317.73842499999995"><contents>首先，网卡向扩展总线中的中
断信号线发送信号，该信号线通过计算机中的中断控制器连接到 CPU。当
产生中断信号时，CPU 会暂时挂起正在处理的任务，切换到操作系统中的
中断处理程序 B。然后，中断处理程序会调用网卡驱动，控制网卡执行相应
的接收操作。</contents></highlight><highlight page="150" rect="53.834,249.749,362.841,295.195" color="#FFCD45" flags="print" name="70733378-53fd-3553-57d9-8de642b913e7" title="Guest" subject="高亮" date="D:20220829192353+08'00'" creationdate="D:20220829192353+08'00'" coords="295.4573,295.19492499999996,362.8123,295.19492499999996,295.4573,283.74362499999995,362.8123,283.74362499999995,53.8343,278.1975249999999,362.8408,278.1975249999999,53.8343,266.746225,362.8408,266.746225,53.84379999999997,261.20012499999996,285.40629999999993,261.20012499999996,53.84379999999997,249.74882499999995,285.40629999999993,249.74882499999995"><contents>例如，假设网卡
的中断号为 11，则在中断处理程序中将中断号 11 和相应的网卡驱动绑定
起来，当网卡发起中断时，就会自动调用网卡驱动了。</contents></highlight><highlight page="150" rect="53.852,164.746,367.580,193.195" color="#FFCD45" flags="print" name="2738edf8-4fb8-c016-becb-b5fb736b67c0" title="Guest" subject="高亮" date="D:20220829192517+08'00'" creationdate="D:20220829192517+08'00'" coords="215.46619999999996,193.194925,367.5802,193.194925,215.46619999999996,181.74362499999995,367.5802,181.74362499999995,53.85219999999997,176.19752499999998,284.68319999999994,176.19752499999998,53.85219999999997,164.74622499999998,284.68319999999994,164.74622499999998"><contents>会从网卡的缓冲区中取出收到的包，
并通过MAC头部中的以太类型字段判断协议的类型。</contents></highlight><highlight page="150" rect="72.852,181.744,215.457,193.195" color="#FFCD45" flags="print" name="fd4cde73-3990-1f87-d028-0a9245f2fdf0" title="Guest" subject="高亮" date="D:20220829192521+08'00'" creationdate="D:20220829192521+08'00'" coords="72.85219999999998,193.194925,215.45669999999998,193.194925,72.85219999999998,181.74362499999995,215.45669999999998,181.74362499999995"><contents>网卡驱动被中断处理程序调用后，</contents></highlight><highlight page="151" rect="82.405,48.791,374.212,115.679" color="#FFCD45" flags="print" name="f9649aa1-f14c-ff5c-2588-b2cb88ab824d" title="Guest" subject="高亮" date="D:20220829192659+08'00'" creationdate="D:20220829192659+08'00'" coords="82.40480000000002,115.67930000000001,374.18479999999994,115.67930000000001,82.40480000000002,104.05129999999997,374.18479999999994,104.05129999999997,83.18780000000001,100.64030000000002,374.21180000000015,100.64030000000002,83.18780000000001,90.80330000000004,374.21180000000015,90.80330000000004,83.18780000000001,86.6363,374.0587999999999,86.6363,83.18780000000001,76.79930000000002,374.0587999999999,76.79930000000002,83.18780000000001,72.63229999999999,374.1668,72.63229999999999,83.18780000000001,62.7953,374.1668,62.7953,83.18780000000001,58.62829999999997,137.1878,58.62829999999997,83.18780000000001,48.79129999999998,137.1878,48.79129999999998"><contents>如果是服务器就不一定了。服务器的操作系统具备和路由器相同的包转发
功能，当打开这一功能时，它就可以像路由器一样对包进行转发。在这种
情况下，当收到不是发给自己的包的时候，就会像路由器一样执行包转发
操作。由于这一过程和路由器是相同的，因此我们将在第 3 章探索路由器
时进行介绍。</contents></highlight><highlight page="151" rect="65.200,180.321,374.178,208.770" color="#FFCD45" flags="print" name="c03bfd09-41cf-9e20-4041-98eaa44cb00a" title="Guest" subject="高亮" date="D:20220829192705+08'00'" creationdate="D:20220829192705+08'00'" coords="84.21889999999982,208.76962500000002,374.1778999999998,208.76962500000002,84.21889999999982,197.31832500000002,374.1778999999998,197.31832500000002,65.1998999999998,193.02154062500006,355.1732,193.02154062500006,65.1998999999998,180.320925,355.1732,180.320925"><contents>如果接收方 IP 地址不是自己的地址，那一定是发生了什么错误。客户
端计算机不负责对包进行转发，因此不应该收到不是发给自己的包 C。</contents></highlight><highlight page="151" rect="65.219,214.316,378.947,242.764" color="#FFCD45" flags="print" name="b2e7ee26-c912-6bf2-c53c-c040f79d94f4" title="Guest" subject="高亮" date="D:20220829192718+08'00'" creationdate="D:20220829192718+08'00'" coords="84.43739999999985,242.76442500000007,378.9468999999998,242.76442500000007,84.43739999999985,231.313125,378.9468999999998,231.313125,65.21889999999982,225.76702500000005,236.21889999999985,225.76702500000005,65.21889999999982,214.31572500000004,236.21889999999985,214.31572500000004"><contents>那么服务器返回的包的接收方 IP 地址应该与客户端网卡的地址一致，
检查确认之后我们就可以接收这个包了。</contents></highlight><highlight page="153" rect="65.206,402.754,378.944,516.190" color="#FFCD45" flags="print" name="24e9829c-7ffd-a2c8-0cbb-f7903adc75e4" title="Guest" subject="高亮" date="D:20220829193115+08'00'" creationdate="D:20220829193115+08'00'" coords="189.27640000000002,516.1897250000002,374.1939,516.1897250000002,189.27640000000002,504.7384250000001,374.1939,504.7384250000001,65.21590000000002,499.19232500000015,378.9439,499.19232500000015,65.21590000000002,487.74102500000015,378.9439,487.74102500000015,65.21590000000002,482.1949250000001,374.1844000000001,482.1949250000001,65.21590000000002,470.7436250000001,374.1844000000001,470.7436250000001,65.20640000000007,465.1975250000001,374.1464000000002,465.1975250000001,65.20640000000007,453.7462250000001,374.1464000000002,453.7462250000001,65.20640000000007,448.2001250000001,374.2034,448.2001250000001,65.20640000000007,436.7488250000001,374.2034,436.7488250000001,65.22540000000001,431.2027250000001,374.1939000000001,431.2027250000001,65.22540000000001,419.7514250000001,374.1939000000001,419.7514250000001,65.22540000000001,414.2053250000001,340.72540000000004,414.2053250000001,65.22540000000001,402.75402500000007,340.72540000000004,402.75402500000007"><contents>如果接收到的包是经过分片的，那么 IP 模块
会将它们还原成原始的包。分片的包会在 IP 头部的标志字段中进行标记，
当收到分片的包时，IP 模块会将其暂存在内部的内存空间中，然后等待 IP
头部中具有相同 ID 的包全部到达，这是因为同一个包的所有分片都具有
相同的 ID。此外，IP 头部还有一个分片偏移量（fragment offset）字段，它
表示当前分片在整个包中所处的位置。根据这些信息，在所有分片全部收
到之后，就可以将它们还原成原始的包，这个操作叫作分片重组。</contents></highlight><highlight page="155" rect="102.874,491.582,179.874,504.089" color="#FFCD45" flags="print" name="9e5bc040-da89-2dd4-f4b8-855c98df0228" title="Guest" subject="高亮" date="D:20220829193746+08'00'" creationdate="D:20220829193746+08'00'" coords="102.87360000000002,504.08880000000005,179.87360000000004,504.08880000000005,102.87360000000002,491.58180000000004,179.87360000000004,491.58180000000004"><contents>控制用的短数据</contents></highlight><highlight page="154" rect="53.801,59.929,362.808,156.368" color="#FFCD45" flags="print" name="3f1373a3-7fa5-8dd6-bf6e-8c88ea8a6664" title="Guest" subject="高亮" date="D:20220829193759+08'00'" creationdate="D:20220829193759+08'00'" coords="72.82029999999983,156.36772499999984,362.7792999999998,156.36772499999984,72.82029999999983,144.91642499999983,362.7792999999998,144.91642499999983,53.81079999999986,139.37032499999987,362.8077999999998,139.37032499999987,53.81079999999986,127.91902499999992,362.8077999999998,127.91902499999992,53.820299999999875,122.3729249999999,362.7888,122.3729249999999,53.820299999999875,110.92162499999989,362.7888,110.92162499999989,53.820299999999875,105.37552499999987,362.7697999999999,105.37552499999987,53.820299999999875,93.92422499999998,362.7697999999999,93.92422499999998,53.80129999999991,88.37812499999984,362.7887999999999,88.37812499999984,53.80129999999991,76.9268249999999,362.7887999999999,76.9268249999999,53.810799999999894,71.38072499999987,362.7793,71.38072499999987,53.810799999999894,59.92942499999981,362.7793,59.92942499999981"><contents>不过，在某种情况下，即便没有 TCP 这样复杂的机制，我们也能够高
效地重发数据，这种情况就是数据很短，用一个包就能装得下。如果只有
一个包，就不用考虑哪个包未送达了，因为全部重发也只不过是重发一个
包而已，这种情况下我们就不需要 TCP 这样复杂的机制了。而且，如果不
使用 TCP，也不需要发送那些用来建立和断开连接的控制包了。此外，我
们发送了数据，对方一般都会给出回复，只要将回复的数据当作接收确认</contents></highlight><highlight page="155" rect="65.197,521.736,236.197,533.187" color="#FFCD45" flags="print" name="4915aa0f-0880-58b4-a9f5-9ef78d792911" title="Guest" subject="高亮" date="D:20220829193802+08'00'" creationdate="D:20220829193802+08'00'" coords="65.1969,533.1871250000002,236.1969,533.1871250000002,65.1969,521.7358250000001,236.1969,521.7358250000001"><contents>就行了，也不需要专门的接收确认包了。</contents></highlight><highlight page="156" rect="71.048,89.557,362.846,114.433" color="#FFCD45" flags="print" name="eb3b651f-77e8-c761-42ec-f957285158ac" title="Guest" subject="高亮" date="D:20220829194350+08'00'" creationdate="D:20220829194350+08'00'" coords="71.0483,114.4332,362.84629999999987,114.4332,71.0483,102.80520000000001,362.84629999999987,102.80520000000001,71.8583,99.39419999999996,306.6143,99.39419999999996,71.8583,89.55719999999997,306.6143,89.55719999999997"><contents>UDP 经常会被防火墙阻止，因此当需要穿越防火墙传输音频和视频数据
时，尽管需要消耗额外的带宽，但有时候也只能使用 TCP。</contents></highlight><highlight page="166" rect="71.048,61.553,362.829,100.433" color="#FFCD45" flags="print" name="6c78725e-b3b8-e5eb-0ef8-21b762891cda" title="Guest" subject="高亮" date="D:20220902101852+08'00'" creationdate="D:20220902101852+08'00'" coords="71.0483,100.4332,362.8292,100.4332,71.0483,88.80520000000001,362.8292,88.80520000000001,71.84930000000001,85.39419999999996,362.8193,85.39419999999996,71.84930000000001,75.55719999999997,362.8193,75.55719999999997,71.84030000000001,71.39020000000005,231.4463,71.39020000000005,71.84030000000001,61.55320000000006,231.4463,61.55320000000006"><contents>PHY（MAU）：以太网有多重派生方式，每种方式中信号收发模块的名称都
不一样。现在 100 Mbit/s 以上的以太网中叫作PHY（物理层装置），以前低
速方式中则叫作MAU（介质连接单元）。</contents></highlight><highlight page="167" rect="65.186,436.744,378.915,533.187" color="#FFCD45" flags="print" name="779005f5-a1a5-f562-cc14-671cb79cbdff" title="Guest" subject="高亮" date="D:20220902101924+08'00'" creationdate="D:20220902101924+08'00'" coords="112.7159,533.1871250000002,378.9154,533.1871250000002,112.7159,521.7358250000001,378.9154,521.7358250000001,65.18740000000003,516.1897250000002,374.1464000000001,516.1897250000002,65.18740000000003,504.7384250000001,374.1464000000001,504.7384250000001,65.18740000000005,500.534048046875,374.1732,500.534048046875,65.18740000000005,487.74102500000015,374.1732,487.74102500000015,65.1952,482.18972499999995,374.16179999999997,482.18972499999995,65.1952,470.73842499999995,374.16179999999997,470.73842499999995,65.1857,465.192325,374.1542,465.192325,65.1857,453.741025,374.1542,453.741025,65.1857,448.19492499999996,198.18570000000003,448.19492499999996,65.1857,436.74362499999995,198.18570000000003,436.74362499999995"><contents>信号损失能量并非只是变弱而已。在第 2 章的图 2.25、图 2.26、
图 2.27 中我们已经看到，以太网中的信号波形是方形的，但损失能量会让
信号的拐角变圆，这是因为电信号的频率越高，能量的损失率越大 A。信号
的拐角意味着电压发生剧烈的变化，而剧烈的变化意味着这个部分的信号
频率很高。高频信号更容易损失能量，因此本来剧烈变化的部分就会变成
缓慢的变化，拐角也就变圆了。</contents></highlight><highlight page="167" rect="97.371,338.582,218.371,351.089" color="#FFCD45" flags="print" name="16452320-19ab-a897-8b65-ea7760e0c156" title="Guest" subject="高亮" date="D:20220902102032+08'00'" creationdate="D:20220902102032+08'00'" coords="97.37140000000002,351.08880000000005,218.37140000000002,351.08880000000005,97.37140000000002,338.58180000000004,218.37140000000002,338.58180000000004"><contents>“双绞”是为了抑制噪声</contents></highlight><highlight page="167" rect="65.168,197.321,374.156,276.762" color="#FFCD45" flags="print" name="381da54f-ebd7-ab5e-acae-b7ddaf2b95e0" title="Guest" subject="高亮" date="D:20220902102116+08'00'" creationdate="D:20220902102116+08'00'" coords="94.02929999999995,276.76182500000004,374.15580000000006,276.76182500000004,94.02929999999995,265.31052500000004,374.15580000000006,265.31052500000004,65.1873,259.764425,374.12729999999993,259.764425,65.1873,248.313125,374.12729999999993,248.313125,65.16829999999999,242.76702500000005,374.13965000000024,242.76702500000005,65.16829999999999,231.31572500000004,374.13965000000024,231.31572500000004,65.16829999999999,225.76962500000002,374.1368000000001,225.76962500000002,65.16829999999999,214.31832500000002,374.1368000000001,214.31832500000002,65.16829999999999,208.772225,312.1683,208.772225,65.16829999999999,197.320925,312.1683,197.320925"><contents>产生噪声的原因是网线周围的电磁波，当电磁波接触到金属等导体
时，在其中就会产生电流。因此，如果网线周围存在电磁波，就会在网线
中产生和原本的信号不同的电流。由于信号本身也是一种带有电压变化的
电流，其本质和噪声产生的电流是一样的，所以信号和噪声的电流就会混
杂在一起，导致信号的波形发生失真，这就是噪声的影响。</contents></highlight><highlight page="167" rect="82.513,61.557,374.167,86.433" color="#FFCD45" flags="print" name="b0650cba-7ebc-c6ae-cdd0-f1e993c60a72" title="Guest" subject="高亮" date="D:20220902102222+08'00'" creationdate="D:20220902102222+08'00'" coords="82.5128,86.43320000000006,374.1667999999999,86.43320000000006,82.5128,74.80520000000001,374.1667999999999,74.80520000000001,83.1968,71.39419999999996,146.1968,71.39419999999996,83.1968,61.557199999999966,146.1968,61.557199999999966"><contents>高频信号会释放出更多的电磁波，这些电磁波带走了一部分能量，就造成
了能量的损失。</contents></highlight><highlight page="168" rect="95.368,129.491,215.368,138.491" color="#FFCD45" flags="print" name="7cbcee69-7663-1fd4-4922-8e76d8fe4262" title="Guest" subject="高亮" date="D:20220902102550+08'00'" creationdate="D:20220902102550+08'00'" coords="95.3685,138.4909,215.36849999999998,138.4909,95.3685,129.4909,215.36849999999998,129.4909"><contents>网卡与集线器用双绞线连接的形态</contents></highlight><highlight page="171" rect="106.707,227.167,178.707,236.167" color="#FFCD45" flags="print" name="9e939179-d372-1835-248e-3b8e3582fb64" title="Guest" subject="高亮" date="D:20220902103822+08'00'" creationdate="D:20220902103822+08'00'" coords="106.70710000000001,236.16650000000004,178.70710000000003,236.16650000000004,106.70710000000001,227.16650000000004,178.70710000000003,227.16650000000004"><contents>双绞线对噪声的抑制</contents></highlight><highlight page="173" rect="65.178,436.749,378.925,534.534" color="#FFCD45" flags="print" name="199b6291-b467-2cad-c1a2-268ec36865d1" title="Guest" subject="高亮" date="D:20220902104347+08'00'" creationdate="D:20220902104347+08'00'" coords="140.40840000000003,534.534048046875,378.92490000000004,534.534048046875,140.40840000000003,521.7358250000001,378.92490000000004,521.7358250000001,65.19690000000001,516.1897250000002,374.1749,516.1897250000002,65.19690000000001,504.7384250000001,374.1749,504.7384250000001,65.19689999999999,499.19232500000015,374.1559,499.19232500000015,65.19689999999999,487.74102500000015,374.1559,487.74102500000015,65.1874,482.1949250000001,374.14639999999997,482.1949250000001,65.1874,470.7436250000001,374.14639999999997,470.7436250000001,65.1779,465.1975250000001,374.1464000000001,465.1975250000001,65.1779,453.7462250000001,374.1464000000001,453.7462250000001,65.17789999999995,448.2001250000001,175.85289999999995,448.2001250000001,65.17789999999995,436.7488250000001,175.85289999999995,436.7488250000001"><contents>？MDI就是对RJ-45接口和信号收发模块进行直连接线，
而 MDI-X 则是交叉接线。由于集线器的接口一般都是 MDI-X 模式，要将
两台集线器相连时，就需要将其中一台改成 MDI 模式（图 3.5（a））。如果
集线器上没有 MDI 切换开关，而且所有的接口又都是 MDI-X 时，可以用
交叉网线连接两台集线器。所谓交叉网线，就是一种将发送和接收信号线
反过来接的网线（图 3.6）。</contents></highlight><highlight page="173" rect="106.707,116.414,162.707,125.414" color="#FFCD45" flags="print" name="a129a648-2643-024c-08e9-b2f852e2cc44" title="Guest" subject="高亮" date="D:20220902105142+08'00'" creationdate="D:20220902105142+08'00'" coords="106.70710000000001,125.41449999999998,162.70710000000003,125.41449999999998,106.70710000000001,116.41449999999998,162.70710000000003,116.41449999999998"><contents>交叉网线的使用</contents></highlight><highlight page="174" rect="82.205,134.673,272.205,145.895" color="#FFCD45" flags="print" name="766835f0-63a4-cd8c-896c-0c1da309c4d1" title="Guest" subject="高亮" date="D:20220902105413+08'00'" creationdate="D:20220902105413+08'00'" coords="82.2047,145.89454999999998,272.2047,145.89454999999998,82.2047,134.67267500000003,272.2047,134.67267500000003"><contents>集线器将信号发送给所有连接在它上面的线路</contents></highlight><highlight page="174" rect="53.839,270.107,362.827,298.556" color="#FFCD45" flags="print" name="2017cbff-78a8-6975-7d7b-2c9e725ffc57" title="Guest" subject="高亮" date="D:20220902105428+08'00'" creationdate="D:20220902105428+08'00'" coords="72.84879999999991,298.5558249999999,362.82679999999993,298.5558249999999,72.84879999999991,287.10452499999997,362.82679999999993,287.10452499999997,53.839299999999966,281.55842499999994,304.96229999999997,281.55842499999994,53.839299999999966,270.10712499999994,304.96229999999997,270.10712499999994"><contents>信号到达集线器的 PHY（MAU）模块后，会进入中继电路。中继电路
的基本功能就是将输入的信号广播到集线器的所有端口上。</contents></highlight><highlight page="174" rect="53.830,185.120,362.808,230.566" color="#FFCD45" flags="print" name="42ff3ddc-4af6-681a-1d88-84d05b6e0c38" title="Guest" subject="高亮" date="D:20220902105435+08'00'" creationdate="D:20220902105435+08'00'" coords="72.83930000000007,230.56622499999992,362.80780000000004,230.56622499999992,72.83930000000007,219.11492499999991,362.80780000000004,219.11492499999991,53.82980000000005,213.5688249999999,362.80780000000004,213.5688249999999,53.82980000000005,202.1175249999999,362.80780000000004,202.1175249999999,53.82980000000005,197.892348046875,325.6469,197.892348046875,53.82980000000005,185.12012499999992,325.6469,185.12012499999992"><contents>接下来，信号从所有接口流出，到达连接在集线器上的所有设备。然
后，这些设备在收到信号之后会通过MAC头部中的接收方MAC地址判
断是不是发给自己的，如果是发给自己的就接受，否则就忽略 A。</contents></highlight><highlight page="175" rect="102.874,359.810,234.874,372.317" color="#FFCD45" flags="print" name="e535fbbf-d2c3-bec2-59fc-e8e00b50e942" title="Guest" subject="高亮" date="D:20220902105619+08'00'" creationdate="D:20220902105619+08'00'" coords="102.87360000000002,372.3171,234.87360000000004,372.3171,102.87360000000002,359.8101,234.87360000000004,359.8101"><contents>交换机根据地址表进行转发</contents></highlight><highlight page="176" rect="95.368,157.011,143.368,166.011" color="#FFCD45" flags="print" name="472c7115-523e-39da-c753-5e42342c7808" title="Guest" subject="高亮" date="D:20220902110024+08'00'" creationdate="D:20220902110024+08'00'" coords="95.3685,166.0106,143.36849999999998,166.0106,95.3685,157.0106,143.36849999999998,157.0106"><contents>交换机的结构</contents></highlight><highlight page="177" rect="93.543,454.314,278.051,465.536" color="#FFCD45" flags="print" name="a315ccc6-1e83-5f22-32ee-a77bf0fae442" title="Guest" subject="高亮" date="D:20220902110352+08'00'" creationdate="D:20220902110352+08'00'" coords="93.5433,465.53625,278.05135,465.53625,93.5433,454.314375,278.05135,454.314375"><contents>交换机端口的MAC模块不具有MAC地址。</contents></highlight><highlight page="176" rect="71.183,56.734,362.829,95.614" color="#FFCD45" flags="print" name="a457c655-a4b4-8737-38fa-8f5b4c18885f" title="Guest" subject="高亮" date="D:20220902110530+08'00'" creationdate="D:20220902110530+08'00'" coords="71.1833,95.61429999999996,362.82920000000007,95.61429999999996,71.1833,83.98630000000003,362.82920000000007,83.98630000000003,71.8583,80.57529999999997,362.8282999999999,80.57529999999997,71.8583,70.73829999999998,362.8282999999999,70.73829999999998,71.8583,66.57129999999995,242.85829999999999,66.57129999999995,71.8583,56.73429999999996,242.85829999999999,56.73429999999996"><contents>换句话说，如果在计算机上安装多块网卡，并开启“混杂模式”让网卡接
收所有的网络包，然后再安装一个和交换机具备同样功能的网络包转发软
件，那么这台计算机就变成了一台交换机。</contents></highlight><highlight page="177" rect="82.513,84.734,374.260,123.614" color="#FFCD45" flags="print" name="56d444f1-0cf1-9ad1-02f4-19b239894c61" title="Guest" subject="高亮" date="D:20220902111014+08'00'" creationdate="D:20220902111014+08'00'" coords="82.5129,123.61429999999996,374.2605,123.61429999999996,82.5129,111.98629999999997,374.2605,111.98629999999997,83.1969,108.57529999999997,374.16689999999994,108.57529999999997,83.1969,98.73829999999998,374.16689999999994,98.73829999999998,83.1969,94.57129999999995,189.1989,94.57129999999995,83.1969,84.73429999999996,189.1989,84.73429999999996"><contents>内置用于实现管理等功能的处理器的交换机除外。这种交换机相当于在一
个盒子里同时集成了计算机和交换机两种设备，因此其中相当于计算机的
部分是具有MAC地址的。</contents></highlight><highlight page="177" rect="78.697,56.735,378.739,81.611" color="#FFCD45" flags="print" name="c0f65122-8ebb-9f23-de0c-a30c67508638" title="Guest" subject="高亮" date="D:20220902111016+08'00'" creationdate="D:20220902111016+08'00'" coords="82.64790000000002,81.61130000000003,378.73889999999983,81.61130000000003,82.64790000000002,69.98329999999999,378.73889999999983,69.98329999999999,78.69690000000001,66.57230000000004,240.6969,66.57230000000004,78.69690000000001,56.73529999999994,240.6969,56.73529999999994"><contents>有些产品不是用交换电路来传输网络包的，但交换电路是交换机的原型，
“交换机”这个词也是从交换电路来的。</contents></highlight><highlight page="178" rect="95.368,323.133,151.368,332.133" color="#FFCD45" flags="print" name="2bd12c0b-f358-d77e-2e54-8b5485c6770d" title="Guest" subject="高亮" date="D:20220902111020+08'00'" creationdate="D:20220902111020+08'00'" coords="95.3685,332.1327,151.36849999999998,332.1327,95.3685,323.1327,151.36849999999998,323.1327"><contents>交换电路的设计</contents></highlight><highlight page="178" rect="53.830,138.976,367.577,269.409" color="#FFCD45" flags="print" name="7634a24a-c86b-cfb9-ac99-0276fc7870af" title="Guest" subject="高亮" date="D:20220902111128+08'00'" creationdate="D:20220902111128+08'00'" coords="140.72629999999992,269.408825,362.81730000000005,269.408825,140.72629999999992,257.957525,362.81730000000005,257.957525,53.848799999999976,252.41142499999995,362.8173,252.41142499999995,53.848799999999976,240.96012499999995,362.8173,240.96012499999995,53.839299999999994,235.41402499999992,367.5768,235.41402499999992,53.839299999999994,223.96272499999998,367.5768,223.96272499999998,53.84880000000001,218.41662499999995,362.81920000000025,218.41662499999995,53.84880000000001,206.96532499999995,362.81920000000025,206.96532499999995,53.83930000000001,201.41922499999993,362.83629999999994,201.41922499999993,53.83930000000001,189.96792499999992,362.83629999999994,189.96792499999992,53.84880000000001,184.4218249999999,362.81730000000005,184.4218249999999,53.84880000000001,172.97052499999995,362.81730000000005,172.97052499999995,53.83930000000003,167.42442499999993,362.80780000000004,167.42442499999993,53.83930000000003,155.97312499999992,362.80780000000004,155.97312499999992,53.82980000000005,151.75064804687497,308.27149999999995,151.75064804687497,53.82980000000005,138.9757249999999,308.27149999999995,138.9757249999999"><contents>根据以太网的规则，首先应该确认没有其他设备在发
送信号，也就是确认信号收发模块中的接收线路没有信号进来。如果检测
到其他设备在发送信号，则需要等待信号发送完毕；如果没有其他信号，
或者其他信号已经发送完毕，这时就可以将包的数字信息转换为电信号发
送出去。在发送信号的过程中，还需要对接收信号进行监控，这一点和网
卡也是一样的。如果在发送过程中检测到其他设备发送信号，就意味着出
现了信号碰撞，这时需要发送阻塞信号以停止网络中所有的发送操作，等
待一段时间后再尝试重新发送，这一步和网卡也是一样的 A。</contents></highlight><highlight page="178" rect="71.174,61.549,362.918,114.433" color="#FFCD45" flags="print" name="61b9da0d-d1eb-e74d-6f9d-fa6c4d4c800d" title="Guest" subject="高亮" date="D:20220902111206+08'00'" creationdate="D:20220902111206+08'00'" coords="71.1743,114.4332,362.91829999999993,114.4332,71.1743,102.80520000000001,362.91829999999993,102.80520000000001,71.8583,99.39419999999996,362.88230000000004,99.39419999999996,71.8583,89.55719999999997,362.88230000000004,89.55719999999997,71.8583,85.39020000000005,362.7283999999999,85.39020000000005,71.8583,75.55320000000006,362.7283999999999,75.55320000000006,71.8583,71.38620000000003,341.8583,71.38620000000003,71.8583,61.54920000000004,341.8583,61.54920000000004"><contents>这个操作过程的前提是终端通过集线器连接到交换机，也就是半双工模式
的工作方式。这是以太网的原型，但现在基本上都不使用集线器了，而是
直接用交换机将终端和路由器相连接，在这种情况下，交换机的端口会自
动切换为全双工模式。关于全双工模式的工作过程我们将稍后介绍。</contents></highlight><highlight page="179" rect="93.543,488.816,360.007,516.536" color="#FFCD45" flags="print" name="92c6f9b0-c68c-b7dc-16c8-d50b5bdd07be" title="Guest" subject="高亮" date="D:20220902111218+08'00'" creationdate="D:20220902111218+08'00'" coords="93.5433,516.53625,360.0069000000001,516.53625,93.5433,505.314375,360.0069000000001,505.314375,93.5433,500.03759999999994,141.0433,500.03759999999994,93.5433,488.815725,141.0433,488.815725"><contents>交换机根据MAC地址表查找MAC地址，然后将信号发送到相
应的端口。</contents></highlight><highlight page="179" rect="102.874,442.913,197.188,455.420" color="#FFCD45" flags="print" name="831c640b-31ec-46a6-2e13-d7236482046c" title="Guest" subject="高亮" date="D:20220902112616+08'00'" creationdate="D:20220902112616+08'00'" coords="102.87360000000002,455.4195,197.1876,455.4195,102.87360000000002,442.9125,197.1876,442.9125"><contents>MAC地址表的维护</contents></highlight><highlight page="179" rect="65.216,63.688,374.156,92.137" color="#FFCD45" flags="print" name="08293f69-964a-2dfd-a81f-7425ebf4c37c" title="Guest" subject="高亮" date="D:20220902112620+08'00'" creationdate="D:20220902112620+08'00'" coords="84.22539999999972,92.13672499999984,374.15589999999963,92.13672499999984,84.22539999999972,80.6854249999999,374.15589999999963,80.6854249999999,65.21589999999972,75.13932499999987,226.71589999999972,75.13932499999987,65.21589999999972,63.688024999999925,226.71589999999972,63.688024999999925"><contents>综合来看，为了防止终端设备移动产生问题，只需要将一段时间不使
用的过时记录从地址表中删除就可以了</contents></highlight><highlight page="181" rect="106.707,381.515,186.707,390.515" color="#FFCD45" flags="print" name="11a0de52-9d87-2ad2-3654-a8b3b22a6d59" title="Guest" subject="高亮" date="D:20220902113513+08'00'" creationdate="D:20220902113513+08'00'" coords="106.70710000000001,390.51460000000003,186.70710000000003,390.51460000000003,106.70710000000001,381.51460000000003,186.70710000000003,381.51460000000003"><contents>不向源端口转发网络包</contents></highlight><highlight page="180" rect="53.868,214.324,362.846,242.772" color="#FFCD45" flags="print" name="aeb97a58-8610-8b33-af98-2cc18b220f75" title="Guest" subject="高亮" date="D:20220902113659+08'00'" creationdate="D:20220902113659+08'00'" coords="343.68430000000006,242.772225,362.84580000000005,242.772225,343.68430000000006,231.320925,362.84580000000005,231.320925,53.86780000000003,225.77482500000002,338.86780000000005,225.77482500000002,53.86780000000003,214.32352500000002,338.86780000000005,214.32352500000002"><contents>。因
此，当交换机发现一个包要发回到原端口时，就会直接丢弃这个包。</contents></highlight><highlight page="180" rect="53.858,95.342,362.855,208.777" color="#FFCD45" flags="print" name="679d9119-7211-e40a-28a4-9b52937c8a7e" title="Guest" subject="高亮" date="D:20220902113739+08'00'" creationdate="D:20220902113739+08'00'" coords="72.86780000000003,208.777425,362.8553,208.777425,72.86780000000003,197.326125,362.8553,197.326125,53.877300000000005,191.78002500000002,362.8524500000001,191.78002500000002,53.877300000000005,180.32872499999996,362.8524500000001,180.32872499999996,53.87729999999998,174.782625,362.8458,174.782625,53.87729999999998,163.331325,362.8458,163.331325,53.867799999999995,157.78522499999997,362.84295000000026,157.78522499999997,53.867799999999995,146.33392500000002,362.84295000000026,146.33392500000002,53.867799999999995,140.787825,362.83630000000005,140.787825,53.867799999999995,129.33652499999994,362.83630000000005,129.33652499999994,53.867799999999995,123.79042499999997,362.83630000000005,123.79042499999997,53.867799999999995,112.33912499999997,362.83630000000005,112.33912499999997,53.85830000000002,106.79302499999994,272.3583,106.79302499999994,53.85830000000002,95.341725,272.3583,95.341725"><contents>还有另外一种特殊情况，就是地址表中找不到指定的MAC地址。这
可能是因为具有该地址的设备还没有向交换机发送过包，或者这个设备一
段时间没有工作导致地址被从地址表中删除了。这种情况下，交换机无法
判断应该把包转发到哪个端口，只能将包转发到除了源端口之外的所有端
口上，无论该设备连接在哪个端口上都能收到这个包。这样做不会产生什
么问题，因为以太网的设计本来就是将包发送到整个网络的，然后只有相
应的接收者才接收包，而其他设备则会忽略这个包。</contents></highlight><highlight page="181" rect="65.199,248.337,374.177,278.133" color="#FFCD45" flags="print" name="7e3d2fe5-c532-2611-9e35-1ca8b3dc5a01" title="Guest" subject="高亮" date="D:20220902114320+08'00'" creationdate="D:20220902114320+08'00'" coords="103.18730000000002,278.132548046875,374.1771,278.132548046875,103.18730000000002,265.347225,374.1771,265.347225,65.19909999999999,259.788125,198.1991,259.788125,65.19909999999999,248.33682499999998,198.1991,248.33682499999998"><contents>，如果接收方MAC地址是一个广播地址 A，那么交换机会将包发
送到除源端口之外的所有端口。</contents></highlight><highlight page="181" rect="82.697,55.884,374.177,94.764" color="#FFCD45" flags="print" name="e9ccd220-f76c-eb0b-b72d-a6c703fb0ec6" title="Guest" subject="高亮" date="D:20220902114331+08'00'" creationdate="D:20220902114331+08'00'" coords="82.6973,94.76390000000004,374.1767000000001,94.76390000000004,82.6973,83.13589999999999,374.1767000000001,83.13589999999999,83.1968,79.72489999999993,374.1667999999999,79.72489999999993,83.1968,69.88789999999995,374.1667999999999,69.88789999999995,83.19680000000002,65.72090000000003,259.94780000000003,65.72090000000003,83.19680000000002,55.88390000000004,259.94780000000003,55.88390000000004"><contents>广播地址（broadcast address）是一种特殊的地址，将广播地址设为接收方
地址时，包会发送到网络中所有的设备。MAC地址中的 FF:FF:FF:FF:FF:FF
和 IP 地址中的 255.255.255.255 都是广播地址</contents></highlight><highlight page="181" rect="65.197,127.912,374.213,173.358" color="#FFCD45" flags="print" name="f78fa230-9ac9-00a1-a27f-15a36d7aa008" title="Guest" subject="高亮" date="D:20220902114408+08'00'" creationdate="D:20220902114408+08'00'" coords="84.20629999999997,173.35762499999998,374.1462999999998,173.35762499999998,84.20629999999997,161.90632499999992,374.1462999999998,161.90632499999992,65.19679999999993,156.36022499999996,374.2127999999998,156.36022499999996,65.19679999999993,144.90892499999995,374.2127999999998,144.90892499999995,65.21579999999989,139.36282499999993,274.2157999999999,139.36282499999993,65.21579999999989,127.91152499999998,274.2157999999999,127.91152499999998"><contents>使用集线器时，如果多台计算机同时发送信号，信号就会在集线器内
部混杂在一起，进而无法使用，这种现象称为碰撞，是以太网的一个重要
特征。不过，只要不用集线器，就不会发生碰撞。</contents></highlight><highlight page="182" rect="49.128,470.744,362.846,534.534" color="#FFCD45" flags="print" name="4116eadd-567d-bf90-5574-a3a9d408e6e3" title="Guest" subject="高亮" date="D:20220902114454+08'00'" creationdate="D:20220902114454+08'00'" coords="72.85829999999999,534.534048046875,362.837,534.534048046875,72.85829999999999,521.7358250000001,362.837,521.7358250000001,53.85899999999998,516.1897250000002,362.8465,516.1897250000002,53.85899999999998,504.7384250000001,362.8465,504.7384250000001,49.12799999999993,499.19232500000015,362.83699999999993,499.19232500000015,49.12799999999993,487.74102500000015,362.83699999999993,487.74102500000015,53.858999999999924,482.1949250000001,348.3589999999999,482.1949250000001,53.858999999999924,470.7436250000001,348.3589999999999,470.7436250000001"><contents>而使用双绞线时，发送和接收的信号线是各自独立的 A，因此在双绞线
中信号不会发生碰撞。网线连接的另一端，即交换机端口和网卡的 PHY
（MAU）模块以及MAC模块，其内部发送和接收电路也是各自独立的，信
号也不会发生碰撞。因此，只要不用集线器，就可以避免信号碰撞了。</contents></highlight><highlight page="182" rect="53.857,334.738,362.856,380.211" color="#FFCD45" flags="print" name="4c3a0bbe-ec3c-bba3-4a81-325198ace189" title="Guest" subject="高亮" date="D:20220902114658+08'00'" creationdate="D:20220902114658+08'00'" coords="236.34449999999984,380.2105250000001,362.8559999999998,380.2105250000001,236.34449999999984,368.7592250000001,362.8559999999998,368.7592250000001,53.86849999999984,364.454540625,362.8347,364.454540625,53.86849999999984,351.76182500000004,362.8347,351.76182500000004,53.85669999999999,346.18972499999995,338.8567,346.18972499999995,53.85669999999999,334.73842499999995,338.8567,334.73842499999995"><contents>在全双工模式下，无需等待其
他信号结束就可以发送信号，因此它比半双工模式速度要快 B。由于双方可
以同时发送数据，所以可同时传输的数据量也更大，性能也就更高。</contents></highlight><highlight page="182" rect="82.205,301.314,281.705,312.536" color="#FFCD45" flags="print" name="35fa80ba-34ef-b3fa-e708-ded0633db6ee" title="Guest" subject="高亮" date="D:20220902114701+08'00'" creationdate="D:20220902114701+08'00'" coords="82.2048,312.53625,281.7048,312.53625,82.2048,301.314375,281.7048,301.314375"><contents>交换机的全双工模式可以同时发送和接收信号。</contents></highlight><highlight page="182" rect="71.048,131.553,362.863,170.433" color="#FFCD45" flags="print" name="2fe2405c-7781-90f3-b6b3-33360c3c057b" title="Guest" subject="高亮" date="D:20220902115059+08'00'" creationdate="D:20220902115059+08'00'" coords="71.0483,170.4332,362.86339999999996,170.4332,71.0483,158.8052,362.86339999999996,158.8052,71.85830000000001,155.3942,362.8121,155.3942,71.85830000000001,145.55720000000002,362.8121,145.55720000000002,71.84929999999999,141.39020000000005,278.84929999999997,141.39020000000005,71.84929999999999,131.5532,278.84929999999997,131.5532"><contents>1000BASE-T 规格的千兆以太网中，发送和接收信号线不是独立的，而是
在同一条线上同时传输两个方向的信号，但 PHY（MAU）模块可以将发送
和接收的信号进行分离，因此两者也不会发生碰撞。</contents></highlight><highlight page="183" rect="65.216,240.644,374.213,269.093" color="#FFCD45" flags="print" name="8fbcae75-40be-2e7d-492f-ed80dcb5aaaf" title="Guest" subject="高亮" date="D:20220902115247+08'00'" creationdate="D:20220902115247+08'00'" coords="113.4094,269.092625,374.2128999999999,269.092625,113.4094,257.641325,374.2128999999999,257.641325,65.21589999999999,252.09522499999997,302.7159,252.09522499999997,65.21589999999999,240.64392499999997,302.7159,240.64392499999997"><contents>此外，除了能自动切换工作模式之外，还能探测对方的传输速
率并进行自动切换。这种自动切换的功能称为自动协商。</contents></highlight><highlight page="183" rect="111.147,313.920,191.147,322.920" color="#FFCD45" flags="print" name="55d54548-3ab9-5b37-9fdf-a280a4f08c31" title="Guest" subject="高亮" date="D:20220902115251+08'00'" creationdate="D:20220902115251+08'00'" coords="111.14710000000001,322.92009999999993,191.14710000000002,322.92009999999993,111.14710000000001,313.92009999999993,191.14710000000002,313.92009999999993"><contents>全双工模式的工作方式</contents></highlight><highlight page="182" rect="91.535,258.247,243.883,270.754" color="#FFCD45" flags="print" name="597660f0-b82b-1728-b2d9-1e7baf684d23" title="Guest" subject="高亮" date="D:20220902115255+08'00'" creationdate="D:20220902115255+08'00'" coords="91.53500000000001,270.7541,243.88280000000003,270.7541,91.53500000000001,258.2471,243.88280000000003,258.2471"><contents>自动协商：确定最优的传输速率</contents></highlight><highlight page="183" rect="65.206,206.649,374.137,235.098" color="#FFCD45" flags="print" name="0fb75bcc-9fbb-8b84-90b5-bf973e4ffe99" title="Guest" subject="高亮" date="D:20220902115354+08'00'" creationdate="D:20220902115354+08'00'" coords="84.21589999999999,235.09782499999994,374.13689999999974,235.09782499999994,84.21589999999999,223.646525,374.13689999999974,223.646525,65.20639999999997,218.10042499999997,132.5614,218.10042499999997,65.20639999999997,206.64912499999997,132.5614,206.64912499999997"><contents>在以太网中，当没有数据在传输时，网络中会填充一种被称为连接脉
冲的脉冲信号。</contents></highlight><highlight page="183" rect="65.206,138.660,374.184,184.106" color="#FFCD45" flags="print" name="c30fd4ad-0818-94ac-6488-11eef290b525" title="Guest" subject="高亮" date="D:20220902115404+08'00'" creationdate="D:20220902115404+08'00'" coords="112.82039999999998,184.10562499999997,374.1844,184.10562499999997,112.82039999999998,172.65432499999997,374.1844,172.65432499999997,65.20639999999997,167.10822499999995,374.18439999999987,167.10822499999995,65.20639999999997,155.65692499999994,374.18439999999987,155.65692499999994,65.20639999999997,151.43954804687496,139.10999999999999,151.43954804687496,65.20639999999997,138.65952499999992,139.10999999999999,138.65952499999992"><contents>。以太网设备的网线接口周围有一个绿色的 LED 指示灯，它表
示是否检测到正常的脉冲信号。如果绿灯亮，说明 PHY（MAU）模块以及
网线连接正常 A。</contents></highlight><highlight page="184" rect="99.808,330.908,203.808,339.908" color="#FFCD45" flags="print" name="6b5ecc1c-e171-3599-722a-c693b207d860" title="Guest" subject="高亮" date="D:20220902115554+08'00'" creationdate="D:20220902115554+08'00'" coords="99.8085,339.9083,203.80849999999998,339.9083,99.8085,330.9083,203.80849999999998,330.9083"><contents>没有传输数据时网络中的信号</contents></highlight><highlight page="184" rect="53.849,504.738,364.301,533.187" color="#FFCD45" flags="print" name="73b7aa21-f2e1-2645-de9c-a39f1e7c131e" title="Guest" subject="高亮" date="D:20220902115613+08'00'" creationdate="D:20220902115613+08'00'" coords="72.5258,533.1871250000002,362.8230000000002,533.1871250000002,72.5258,521.7358250000001,362.8230000000002,521.7358250000001,53.84879999999999,517.534048046875,364.30080000000004,517.534048046875,53.84879999999999,504.7384250000001,364.30080000000004,504.7384250000001"><contents>自动协商功能就利用了这样的脉冲信号，即通过这种信号将自己能够支
持的工作模式 A 和传输速率相互告知对方，并从中选择一个最优的组合 B。</contents></highlight></annots><pages><defmtx matrix="1,0,0,-1,0,612.2830000000001"/><pgmtx matrix="1,0,0,-1,0,612" page="1"/><pgmtx matrix="1,0,0,-1,0,612.24" page="3"/><pgmtx matrix="1,0,0,-1,0,612" page="365"/></pages></xfdf>